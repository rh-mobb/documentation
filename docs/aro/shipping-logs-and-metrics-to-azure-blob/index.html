<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.113.0"><meta name=generator content="Relearn 5.2.3+tip"><meta name=description content><title>Shipping logs and metrics to Azure Blob storage :: Managed OpenShift Black Belt - Unofficial Documentation</title><link href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/index.xml rel=alternate type=application/rss+xml title="Managed OpenShift Black Belt - Unofficial Documentation"><link href=https://mobb.ninja/css/fontawesome-all.min.css?1686327239 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fontawesome-all.min.css?1686327239 rel=stylesheet></noscript><link href=https://mobb.ninja/css/featherlight.min.css?1686327239 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/featherlight.min.css?1686327239 rel=stylesheet></noscript><link href=https://mobb.ninja/css/auto-complete.css?1686327239 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/auto-complete.css?1686327239 rel=stylesheet></noscript><link href=https://mobb.ninja/css/perfect-scrollbar.min.css?1686327239 rel=stylesheet><link href=https://mobb.ninja/css/nucleus.css?1686327239 rel=stylesheet><link href=https://mobb.ninja/css/fonts.css?1686327239 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fonts.css?1686327239 rel=stylesheet></noscript><link href=https://mobb.ninja/css/theme.css?1686327239 rel=stylesheet><link href=https://mobb.ninja/css/theme-red.css?1686327239 rel=stylesheet id=variant-style><link href=https://mobb.ninja/css/ie.css?1686327239 rel=stylesheet><link href=https://mobb.ninja/css/variant.css?1686327239 rel=stylesheet><link href=https://mobb.ninja/css/print.css?1686327239 rel=stylesheet media=print><script src=https://mobb.ninja/js/variant.js?1686327239></script>
<script>var index_url="https://mobb.ninja/index.json",baseUriFull,root_url="https://mobb.ninja/",baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",baseUriFull="https://mobb.ninja/",window.variants&&variants.init(["red"])</script><script src=https://mobb.ninja/js/jquery.min.js?1686327239 defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WM5QQ0P3P1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WM5QQ0P3P1",{anonymize_ip:!1})}</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next" href=https://mobb.ninja/docs/aro/azure-service-operator/ title="Azure Service Operator (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://mobb.ninja/docs/aro/azure-arc-integration/ title="Integrating Azure ARC with ARO (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=https://mobb.ninja/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=https://mobb.ninja/docs/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=https://mobb.ninja/docs/aro/><span itemprop=name>Azure Red Hat OpenShift</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/ aria-disabled=true><span itemprop=name>Shipping logs and metrics to Azure Blob storage</span></a></li></ol></div><div class="default-animation progress"><div class=wrapper><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#preparation>Preparation</a></li><li><a href=#create-aro-cluster>Create ARO Cluster</a><ul><li><a href=#configure-additional-azure-resources>Configure additional Azure resources</a></li><li><a href=#configure-mobb-helm-repository>Configure MOBB Helm Repository</a></li><li><a href=#update-the-pull-secret-and-enable-operatorhub>Update the Pull Secret and enable OperatorHub</a></li></ul></li><li><a href=#configure-metrics-federation-to-azure-blob-storage>Configure Metrics Federation to Azure Blob Storage</a><ul><li><a href=#grafana-operator>Grafana Operator</a></li><li><a href=#resource-locker-operator>Resource Locker Operator</a></li><li><a href=#configure-metrics-federation>Configure Metrics Federation</a></li><li><a href=#deploy-and-configure-cluster-logging-and-loki>Deploy and Configure Cluster Logging and Loki</a></li></ul></li><li><a href=#validate-metrics-and-logs>Validate Metrics and Logs</a></li><li><a href=#debugging-loki>Debugging loki</a></li><li><a href=#cleanup>Cleanup</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=https://mobb.ninja/tags/aro>ARO</a>
<a class=tag-link href=https://mobb.ninja/tags/azure>Azure</a></div></div><style>.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-warning{background-color:#fcf8e3;border-color:#fbeed5;color:#c09853}</style><p class="alert alert-warning"><b>IMPORTANT NOTE</b>: This site is not official Red Hat documentation and is provided for informational purposes only. These guides may be experimental, proof of concept, or early adoption. Officially supported documentation is available at <a href=https://docs.openshift.com target=_blank>docs.openshift.com</a> and <a href=https://access.redhat.com target=_blank>access.redhat.com</a>.</p><article class=default><h1>Shipping logs and metrics to Azure Blob storage</h1><hr><p><b>Authors:</b>
Paul Czarkowski,
Connor Wooley<br><b>Last Editor:</b>
Dustin Scott<br><b>Published Date:</b>
1 October 2022<br><b>Modified Date:</b> 25 May 2023</p><hr><p><a href=https://azure.microsoft.com/en-us/products/openshift/#overview target=_blank>Azure Red Hat Openshift</a>
clusters have built in metrics and logs that can be viewed by both Administrators and Developers via the OpenShift Console. But there are many reasons you might want to store and view these metrics and logs from outside of the cluster.</p><p>The OpenShift developers have anticipated this needs and have provided ways to ship both metrics and logs outside of the cluster. In Azure we have the Azure Blob storage service which is perfect for storing the data.</p><p>In this guide we&rsquo;ll be setting up <a href=https://thanos.io/ target=_blank>Thanos</a>
and <a href=https://grafana.com/docs/agent/latest/ target=_blank>Grafana Agent</a>
to forward cluster and user workload metrics to Azure Blob as well the Cluster Logging Operator to forward logs to <a href=https://grafana.com/oss/loki/ target=_blank>Loki</a>
which stores the logs in Azure Blob.</p><h2 id=prerequisites>Prerequisites</h2><ul><li><a href=https://learn.microsoft.com/en-us/cli/azure/install-azure-cli target=_blank>Azure CLI</a></li><li><a href=https://www.terraform.io/downloads target=_blank>Terraform</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/cli_reference/openshift_cli/getting-started-cli.html target=_blank>OC CLI</a></li><li><a href=https://helm.sh/docs/intro/install/ target=_blank>Helm</a></li><li><a href=https://git-scm.com/book/en/v2/Getting-Started-Installing-Git target=_blank>Git</a></li></ul><h2 id=preparation>Preparation</h2><blockquote><p>Note: This guide was written on Fedora Linux (using the zsh shell) running inside Windows 11 WSL2. You may need to modify these instructions slightly to suit your Operating System / Shell of choice.</p></blockquote><ol><li><p>Create some environment variables to be reused through this guide</p><blockquote><p>Modify these values to suit your environment, especially the storage account name which must be globally unique.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>export CLUSTER<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;aro-</span><span style=color:#e6db74>${</span>USERNAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>export WORKDIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/tmp/</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>export NAMESPACE<span style=color:#f92672>=</span>mobb-aro-obs
</span></span><span style=display:flex><span>export AZR_STORAGE_ACCOUNT_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;aro</span><span style=color:#e6db74>${</span>USERNAME<span style=color:#e6db74>}</span><span style=color:#e6db74>obs&#34;</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>cd <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li><li><p>Log into Azure CLI</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az login
</span></span></code></pre></div></li></ol><h2 id=create-aro-cluster>Create ARO Cluster</h2><blockquote><p>You can skip this step if you already have a cluster, or if you want to create it another way.</p></blockquote><p>This will create a default ARO cluster named <code>aro-${USERNAME}</code>, you can modify the TF variables/Makefile to change settings, just update the environment variables loaded above to suit.</p><ol><li><p>clone down the Black Belt ARO Terraform repo</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/rh-mobb/terraform-aro.git
</span></span><span style=display:flex><span>cd terraform-aro
</span></span></code></pre></div></li><li><p>Initialize, Create a plan, and apply</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>make create
</span></span></code></pre></div><p>This should take about 35 minutes and the final lines of the output should look like</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>azureopenshift_redhatopenshift_cluster.cluster: Still creating... [35m30s elapsed]
</span></span><span style=display:flex><span>azureopenshift_redhatopenshift_cluster.cluster: Still creating... [35m40s elapsed]
</span></span><span style=display:flex><span>azureopenshift_redhatopenshift_cluster.cluster: Creation complete after 35m48s [id=/subscriptions/e7f88b1a-04fc-4d00-ace9-eec077a5d6af/resourceGroups/my-tf-cluster-rg/providers/Microsoft.RedHatOpenShift/openShiftClusters/my-tf-cluster]
</span></span></code></pre></div></li><li><p>Save, display the ARO credentials, and login</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az aro list --query <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   <span style=color:#e6db74>&#34;[?name==&#39;</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;].{Name:name,Console:consoleProfile.url,API:apiserverProfile.url, ResourceGroup:resourceGroup,Location:location}&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -o tsv |  read -r NAME CONSOLE API RESOURCEGROUP LOCATION
</span></span><span style=display:flex><span>az aro list-credentials -n $NAME -g $RESOURCEGROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -o tsv | read -r OCP_PASS OCP_USER
</span></span><span style=display:flex><span>oc login <span style=color:#e6db74>${</span>API<span style=color:#e6db74>}</span> --username <span style=color:#e6db74>${</span>OCP_USER<span style=color:#e6db74>}</span> --password <span style=color:#e6db74>${</span>OCP_PASS<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$<span style=color:#e6db74> oc login </span><span style=color:#e6db74>${</span>API<span style=color:#e6db74>}</span><span style=color:#e6db74> --username </span><span style=color:#e6db74>${</span>OCP_USER<span style=color:#e6db74>}</span><span style=color:#e6db74> --password </span><span style=color:#e6db74>${</span>OCP_PASS<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Login to </span><span style=color:#e6db74>${</span>CONSOLE<span style=color:#e6db74>}</span><span style=color:#e6db74> as </span><span style=color:#e6db74>${</span>OCP_USER<span style=color:#e6db74>}</span><span style=color:#e6db74> with password </span><span style=color:#e6db74>${</span>OCP_PASS<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li><li><p>Now would be a good time to use the output of this command to log into the OCP Console, you can always run <code>echo "Login to ${CONSOLE} as ${OCP_USER} with password ${OCP_PASS}"</code> at any time to remind yourself of the URL and credentials.</p></li></ol><h3 id=configure-additional-azure-resources>Configure additional Azure resources</h3><p>These steps create the Storage Account (and two storage containers) in the same Resource Group as the ARO cluster to make cleanup easier. You may want to change it, especially if you plan to host metrics and logs for multiple clusters in the one Storage Account.</p><ol><li><p>Create Azure Storage Account and Storage Containers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create Storage Account</span>
</span></span><span style=display:flex><span>az storage account create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --name $AZR_STORAGE_ACCOUNT_NAME <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --resource-group $RESOURCEGROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --location $LOCATION <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --sku Standard_RAGRS <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --kind StorageV2
</span></span><span style=display:flex><span><span style=color:#75715e># Fetch the Azure storage key</span>
</span></span><span style=display:flex><span>AZR_STORAGE_KEY<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>az storage account keys list -g <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>RESOURCEGROUP<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -n <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>AZR_STORAGE_ACCOUNT_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> --query <span style=color:#e6db74>&#34;[0].value&#34;</span> -o tsv<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create Azure Storage Containers</span>
</span></span><span style=display:flex><span>az storage container create --name <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>-metrics&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --account-name <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>AZR_STORAGE_ACCOUNT_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --account-key <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>AZR_STORAGE_KEY<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>az storage container create --name <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>-logs&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --account-name <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>AZR_STORAGE_ACCOUNT_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --account-key <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>AZR_STORAGE_KEY<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li></ol><h3 id=configure-mobb-helm-repository>Configure MOBB Helm Repository</h3><p>Helm charts do a lot of the heavy lifting for us, and reduce the need for us to copy/paste a pile of YAML. The Managed OpenShift Black Belt team maintain these charts <a href=https://github.com/rh-mobb/helm-charts/ target=_blank>here</a>
.</p><ol><li><p>Add the MOBB chart repository to your Helm</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add mobb https://rh-mobb.github.io/helm-charts/
</span></span></code></pre></div></li><li><p>Update your Helm repositories</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo update
</span></span></code></pre></div></li><li><p>Create a namespace to use</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc new-project <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li></ol><h3 id=update-the-pull-secret-and-enable-operatorhub>Update the Pull Secret and enable OperatorHub</h3><p>This is required to provide credentials to the cluster to pull various Red Hat images in order to enable and configure the Operator Hub.</p><ol><li><p>Download a Pull secret from <a href=https://console.redhat.com/openshift/downloads#tool-pull-secret target=_blank>Red Hat Cloud Console</a>
and save it in <code>${SCRATCHDIR}/pullsecret.txt</code></p></li><li><p>Update the cluster&rsquo;s pull secret using the <a href=https://github.com/rh-mobb/helm-charts/tree/main/charts/aro-pull-secret target=_blank>mobb/aro-pull-secret</a>
Helm Chart</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Annotate resources for Helm</span>
</span></span><span style=display:flex><span>oc -n openshift-config annotate secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   pull-secret meta.helm.sh/release-name<span style=color:#f92672>=</span>pull-secret
</span></span><span style=display:flex><span>oc -n openshift-config annotate secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   pull-secret meta.helm.sh/release-namespace<span style=color:#f92672>=</span>openshift-config
</span></span><span style=display:flex><span>oc -n openshift-config label secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   pull-secret app.kubernetes.io/managed-by<span style=color:#f92672>=</span>Helm
</span></span><span style=display:flex><span><span style=color:#75715e># Update pull secret (change path needed)</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt; EOF &gt; &#34;${WORKDIR}/pullsecret.yaml&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>pullSecret: |
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  $(&lt; &#34;${WORKDIR}/pull-secret.txt&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>helm upgrade --install pull-secret mobb/aro-pull-secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -n openshift-config --values <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span><span style=color:#e6db74>/pullsecret.yaml&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable Operator Hub</span>
</span></span><span style=display:flex><span>oc patch configs.samples.operator.openshift.io cluster --type<span style=color:#f92672>=</span>merge <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{&#34;spec&#34;:{&#34;managementState&#34;:&#34;Managed&#34;}}&#39;</span>
</span></span><span style=display:flex><span>oc patch operatorhub cluster --type<span style=color:#f92672>=</span>merge <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{&#34;spec&#34;:{&#34;sources&#34;:[
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     {&#34;name&#34;:&#34;redhat-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     {&#34;name&#34;:&#34;certified-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     {&#34;name&#34;:&#34;community-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     {&#34;name&#34;:&#34;redhat-marketplace&#34;,&#34;disabled&#34;:false}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   ]}}&#39;</span>
</span></span></code></pre></div></li><li><p>Wait for OperatorHub pods to be ready</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>watch oc -n openshift-marketplace get pods
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME                                    READY   STATUS    RESTARTS      AGE
</span></span><span style=display:flex><span>certified-operators-xm674               1/1     Running   0             117s
</span></span><span style=display:flex><span>community-operators-c5pcq               1/1     Running   0             117s
</span></span><span style=display:flex><span>marketplace-operator-7696c9454c-wgtzp   1/1     Running   1 (30m ago)   47m
</span></span><span style=display:flex><span>redhat-marketplace-sgnsg                1/1     Running   0             117s
</span></span><span style=display:flex><span>redhat-operators-pdbg8                  1/1     Running   0             117s
</span></span></code></pre></div></li></ol><h2 id=configure-metrics-federation-to-azure-blob-storage>Configure Metrics Federation to Azure Blob Storage</h2><p>Next we can configure Metrics Federation to Azure Blob Storage. This is done by deploying the Grafana Operator (to install Grafana to view the metrics later) and the Resource Locker Operator (to configure the User Workload Metrics) and then the <code>mobb/aro-thanos-af</code> Helm Chart to Deploy and Configure Thanos and Grafana Agent to store and retrieve the metrics in Azure Blob.</p><h3 id=grafana-operator>Grafana Operator</h3><ol><li><p>Deploy the Grafana Operator</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create a file containing the Grafana operator</span>
</span></span><span style=display:flex><span>mkdir -p $WORKDIR/metrics
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; $WORKDIR/metrics/grafana-operator.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>subscriptions:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - name: grafana-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    channel: v4
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    installPlanApproval: Automatic
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    source: community-operators
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    sourceNamespace: openshift-marketplace
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    startingCSV: grafana-operator.v4.7.0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>operatorGroups:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - name: ${NAMESPACE}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    targetNamespace: ~
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deploy the Grafana Operator using Helm</span>
</span></span><span style=display:flex><span>helm upgrade -n <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> clf-operators <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   mobb/operatorhub --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --values <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span><span style=color:#e6db74>/metrics/grafana-operator.yaml&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Wait for the Grafana Operator to be installed</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> ! oc get grafana; <span style=color:#66d9ef>do</span> sleep 5; echo -n .; <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>After a few minutes you should see the following</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>error: the server doesn&#39;t have a resource type &#34;grafana&#34;
</span></span><span style=display:flex><span>error: the server doesn&#39;t have a resource type &#34;grafana&#34;
</span></span><span style=display:flex><span>No resources found in mobb-aro-obs namespace.
</span></span></code></pre></div></li></ol><h3 id=resource-locker-operator>Resource Locker Operator</h3><ol><li><p>Deploy the Resource Locker Operator</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the namespace `resource-locker-operator`</span>
</span></span><span style=display:flex><span>oc create namespace resource-locker-operator
</span></span><span style=display:flex><span><span style=color:#75715e># Create a file containing the Grafana operator</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; $WORKDIR/resource-locker-operator.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>subscriptions:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- name: resource-locker-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  channel: alpha
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  installPlanApproval: Automatic
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  source: community-operators
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  sourceNamespace: openshift-marketplace
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: resource-locker-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>operatorGroups:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- name: resource-locker
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: resource-locker-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  targetNamespace: all
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deploy the Resource Locker Operator using Helm</span>
</span></span><span style=display:flex><span>helm upgrade -n resource-locker-operator resource-locker-operator <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   mobb/operatorhub --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --values <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>/resource-locker-operator.yaml
</span></span><span style=display:flex><span><span style=color:#75715e># Wait for the Operators to be installed</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> ! oc get resourcelocker; <span style=color:#66d9ef>do</span> sleep 5; echo -n .; <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>After a few minutes you should see the following</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>error: the server doesn&#39;t have a resource type &#34;resourcelocker&#34;
</span></span><span style=display:flex><span>error: the server doesn&#39;t have a resource type &#34;resourcelocker&#34;
</span></span><span style=display:flex><span>No resources found in mobb-aro-obs namespace.
</span></span></code></pre></div></li></ol><h3 id=configure-metrics-federation>Configure Metrics Federation</h3><ol><li><p>Deploy <code>mobb/aro-thanos-af</code> Helm Chart to configure metrics federation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade -n <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> aro-thanos-af <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --install mobb/aro-thanos-af --version 0.4.1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;aro.storageAccount=</span><span style=color:#e6db74>${</span>AZR_STORAGE_ACCOUNT_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;aro.storageAccountKey=</span><span style=color:#e6db74>${</span>AZR_STORAGE_KEY<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;aro.storageContainer=</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>-metrics&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;enableUserWorkloadMetrics=true&#34;</span>
</span></span></code></pre></div></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>
</span></span><span style=display:flex><span>## Configure Logs Federation to Azure Blob Storage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Next we need to deploy the Cluster Logging and Loki Operators so that we can use the `mobb/aro-clf-blob` Helm Chart to deploy and configure Cluster Log Forwarding and the Loki Stack to store metrics in Azure Blob.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### Deploy Operators
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. Deploy the cluster logging and loki operators
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> ```bash
</span></span><span style=display:flex><span> # Create nanespaces
</span></span><span style=display:flex><span> oc create ns openshift-logging
</span></span><span style=display:flex><span> oc create ns openshift-operators-redhat
</span></span><span style=display:flex><span> # Configure and deploy operators
</span></span><span style=display:flex><span> mkdir -p &#34;${WORKDIR}/logs&#34;
</span></span><span style=display:flex><span> cat &lt;&lt; EOF &gt; &#34;${WORKDIR}/logs/log-operators.yaml&#34;
</span></span><span style=display:flex><span> subscriptions:
</span></span><span style=display:flex><span> - name: cluster-logging
</span></span><span style=display:flex><span>   channel: stable
</span></span><span style=display:flex><span>   installPlanApproval: Automatic
</span></span><span style=display:flex><span>   source: redhat-operators
</span></span><span style=display:flex><span>   sourceNamespace: openshift-marketplace
</span></span><span style=display:flex><span>   namespace: openshift-logging
</span></span><span style=display:flex><span>   startingCSV: cluster-logging.5.5.2
</span></span><span style=display:flex><span> - name: loki-operator
</span></span><span style=display:flex><span>   channel: stable
</span></span><span style=display:flex><span>   installPlanApproval: Automatic
</span></span><span style=display:flex><span>   source: redhat-operators
</span></span><span style=display:flex><span>   sourceNamespace: openshift-marketplace
</span></span><span style=display:flex><span>   namespace: openshift-operators-redhat
</span></span><span style=display:flex><span>   startingCSV: loki-operator.5.5.2
</span></span><span style=display:flex><span> operatorGroups:
</span></span><span style=display:flex><span> - name: openshift-logging
</span></span><span style=display:flex><span>   namespace: openshift-logging
</span></span><span style=display:flex><span>   targetNamespace: openshift-logging
</span></span><span style=display:flex><span> - name: openshift-operators-redhat
</span></span><span style=display:flex><span>   namespace: openshift-operators-redhat
</span></span><span style=display:flex><span>   targetNamespace: all
</span></span><span style=display:flex><span> EOF
</span></span><span style=display:flex><span> # Deploy the OpenShift Loki Operator and the Red Hat OpenShift Logging Operator
</span></span><span style=display:flex><span> helm upgrade -n $NAMESPACE clf-operators \
</span></span><span style=display:flex><span>    mobb/operatorhub --install \
</span></span><span style=display:flex><span>    --values &#34;${WORKDIR}/logs/log-operators.yaml&#34;
</span></span><span style=display:flex><span> # Wait for the Operators to be installed
</span></span><span style=display:flex><span> while ! oc get clusterlogging; do sleep 5; echo -n .; done
</span></span><span style=display:flex><span> while ! oc get lokistack; do sleep 5; echo -n .; done
</span></span></code></pre></div><h3 id=deploy-and-configure-cluster-logging-and-loki>Deploy and Configure Cluster Logging and Loki</h3><ol><li><p>Configure the loki stack to log to Azure Blob</p><blockquote><p>Note: Only Infrastructure and Application logs are configured to forward by default to reduce storage and traffic. You can add the argument <code>--set clf.audit=true</code> to also forward debug logs.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade -n <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> aro-clf-blob <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --install mobb/aro-clf-blob --version 0.1.1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;azure.storageAccount=</span><span style=color:#e6db74>${</span>AZR_STORAGE_ACCOUNT_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;azure.storageAccountKey=</span><span style=color:#e6db74>${</span>AZR_STORAGE_KEY<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --set <span style=color:#e6db74>&#34;azure.storageContainer=</span><span style=color:#e6db74>${</span>CLUSTER<span style=color:#e6db74>}</span><span style=color:#e6db74>-logs&#34;</span>
</span></span></code></pre></div></li><li><p>Wait for the logging stack to come online</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>watch oc -n openshift-logging get pods
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME                                           READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>cluster-logging-operator-8469d5479f-kzh4j      1/1     Running   0          2m10s
</span></span><span style=display:flex><span>collector-gbqpr                                2/2     Running   0          61s
</span></span><span style=display:flex><span>collector-j7f4j                                2/2     Running   0          40s
</span></span><span style=display:flex><span>collector-ldj2k                                2/2     Running   0          58s
</span></span><span style=display:flex><span>collector-pc82l                                2/2     Running   0          56s
</span></span><span style=display:flex><span>collector-qrzlb                                2/2     Running   0          58s
</span></span><span style=display:flex><span>collector-vsj7z                                2/2     Running   0          56s
</span></span><span style=display:flex><span>logging-loki-compactor-0                       1/1     Running   0          89s
</span></span><span style=display:flex><span>logging-loki-distributor-565c84c54f-4f24j      1/1     Running   0          89s
</span></span><span style=display:flex><span>logging-loki-gateway-69d68bc47f-rfp8t          2/2     Running   0          88s
</span></span><span style=display:flex><span>logging-loki-index-gateway-0                   1/1     Running   0          88s
</span></span><span style=display:flex><span>logging-loki-ingester-0                        0/1     Running   0          89s
</span></span><span style=display:flex><span>logging-loki-querier-96c699b7d-fjdrr           1/1     Running   0          89s
</span></span><span style=display:flex><span>logging-loki-query-frontend-796d85bf5b-cb4dh   1/1     Running   0          88s
</span></span><span style=display:flex><span>logging-view-plugin-98cf668b-dbdkd             1/1     Running   0          107s
</span></span></code></pre></div></li><li><p>Sometimes the log collector needs to be restarted for logs to flow correctly into Loki. Wait a few minutes then run the following</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc -n openshift-logging rollout restart daemonset collector
</span></span></code></pre></div></li></ol><h2 id=validate-metrics-and-logs>Validate Metrics and Logs</h2><p>Now that the Metrics and Log forwarding is set up we can view them in Grafana.</p><ol><li><p>Fetch the <code>Route</code> for <code>Grafana</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc -n <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> get route grafana-route
</span></span></code></pre></div></li><li><p>Browse to the provided route address and login using your OpenShift credentials (username <code>kubeadmin</code>, password <code>echo $OCP_PASS</code>).</p></li><li><p>View an existing dashboard such as <strong>mobb-aro-obs</strong> -> <strong>Node Exporter</strong> -> <strong>USE Method</strong> -> <strong>Cluster</strong>.</p><p><img src=../federated-metrics/grafana-metrics.png alt="screenshot showing federated metrics"></p></li><li><p>Click the Explore (compass) Icon in the left hand menu, select &ldquo;Loki (Application)&rdquo; in the dropdown and search for <code>{kubernetes_namespace_name="mobb-aro-obs"}</code></p><p><img src=./grafana-logs.png alt="screenshot showing logs"></p></li></ol><h2 id=debugging-loki>Debugging loki</h2><p>If you don&rsquo;t see logs in Grafana you can validate that Loki is correctly storing them by querying it directly like so.</p><ol><li><p>Port forward to the Loki Service</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc port-forward -n openshift-logging svc/logging-loki-gateway-http 8080:8080
</span></span></code></pre></div></li><li><p>Make sure you can curl the Loki service and get a list of labels</p><blockquote><p>You can get the bearer token from the login command screen in the OCP Dashboard</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>curl -k -H <span style=color:#e6db74>&#34;Authorization: Bearer &lt;BEARER TOKEN&gt;&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;https://localhost:8080/api/logs/v1/infrastructure/loki/api/v1/labels&#39;</span>
</span></span></code></pre></div></li><li><p>You can also use the <a href=https://github.com/grafana/loki/releases target=_blank>Loki CLI</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>logcli --bearer-token=&#34;&lt;BEARER TOKEN&gt;&#34; --tls-skip-verify --addr https://localhost:
</span></span><span style=display:flex><span>8080/api/logs/v1/infrastructure/ labels
</span></span></code></pre></div></li></ol><h2 id=cleanup>Cleanup</h2><p>Assuming you didn&rsquo;t deviate from the guide then you created everything in the Resource Group of the ARO cluster and you can simply destroy our Terraform stack and everything will be cleaned up.</p><ol><li><p>Delete the ARO cluster</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cd <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WORKDIR<span style=color:#e6db74>}</span><span style=color:#e6db74>/terraform-aro&#34;</span>
</span></span><span style=display:flex><span>make delete
</span></span></code></pre></div></li></ol><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-wrapper class=default-animation><div id=header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:80%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=https://mobb.ninja/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M341.52 285.56c33.65.0 82.34-6.94 82.34-47 .22-6.74.86-1.82-20.88-96.24-4.62-19.15-8.68-27.84-42.31-44.65-26.09-13.34-82.92-35.37-99.73-35.37-15.66.0-20.2 20.17-38.87 20.17-18 0-31.31-15.06-48.12-15.06-16.14.0-26.66 11-34.78 33.62-27.5 77.55-26.28 74.27-26.12 78.27.0 24.8 97.64 106.11 228.47 106.11M429 254.84c4.65 22 4.65 24.35 4.65 27.25.0 37.66-42.33 58.56-98 58.56-125.74.08-235.91-73.65-235.91-122.33a49.55 49.55.0 014.06-19.72C58.56 200.86.0 208.93.0 260.63c0 84.67 200.63 189 359.49 189 121.79.0 152.51-55.08 152.51-98.58.0-34.21-29.59-73.05-82.93-96.24"/></svg>MOBB Ninja</a></div><div class="searchbox default-animation"><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=https://mobb.ninja/js/auto-complete.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/lunr.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/lunr.stemmer.support.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/lunr.multi.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/lunr.en.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/search.js?1686327239 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=https://mobb.ninja/><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics collapsible-menu"><li data-nav-id=/docs/ title="Documentation from the MOBB" class="dd-item parent"><input type=checkbox id=section-2f67fdc9a362fd86f1cfd4450ed56551 class=toggle checked><label for=section-2f67fdc9a362fd86f1cfd4450ed56551></label><a href=https://mobb.ninja/docs/>Documentation from the MOBB</a><ul><li data-nav-id=/docs/quickstart-aro/ title="ARO Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-aro/>ARO Quickstart</a></li><li data-nav-id=/docs/quickstart-rosa/ title="ROSA Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-rosa/>ROSA Quickstart</a></li><li data-nav-id=/docs/rosa/ title="Red Hat Openshift Service on AWS" class=dd-item><input type=checkbox id=section-d82bea3b793597b6ff01917e2ad59aae class=toggle><label for=section-d82bea3b793597b6ff01917e2ad59aae></label><a href=https://mobb.ninja/docs/rosa/>Red Hat Openshift Service on AWS</a><ul><li data-nav-id=/docs/rosa/aws-secrets-manager-csi/ title="Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-secrets-manager-csi/>Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS</a></li><li data-nav-id=/docs/rosa/aws-efs/ title="Enabling the AWS EFS CSI Driver Operator on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-efs/>Enabling the AWS EFS CSI Driver Operator on ROSA</a></li><li data-nav-id=/docs/rosa/egress-ip/ title="Assign Consistent Egress IP for External Traffic" class=dd-item><a href=https://mobb.ninja/docs/rosa/egress-ip/>Assign Consistent Egress IP for External Traffic</a></li><li data-nav-id=/docs/rosa/gpu/ title="ROSA with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/rosa/gpu/>ROSA with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/rosa/external-dns/ title="External DNS for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/external-dns/>External DNS for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/aws-load-balancer-operator/ title="AWS Load Balancer Operator On ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-load-balancer-operator/>AWS Load Balancer Operator On ROSA</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-vector/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-vector/>Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector</a></li><li data-nav-id=/docs/rosa/dynamic-certificates/ title="Dynamic Certificates for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/dynamic-certificates/>Dynamic Certificates for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/static-ip-load-balancer/ title="Configure a load balancer service to use a static public IP" class=dd-item><a href=https://mobb.ninja/docs/rosa/static-ip-load-balancer/>Configure a load balancer service to use a static public IP</a></li><li data-nav-id=/docs/rosa/verify-permissions/ title="Verify Permissions for ROSA STS Deployment" class=dd-item><a href=https://mobb.ninja/docs/rosa/verify-permissions/>Verify Permissions for ROSA STS Deployment</a></li><li data-nav-id=/docs/rosa/sts-oidc-flow/ title="STS OIDC in ROSA : How it works!" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-oidc-flow/>STS OIDC in ROSA : How it works!</a></li><li data-nav-id=/docs/rosa/security-ra/ title="Security Reference Architecture for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/security-ra/>Security Reference Architecture for ROSA</a></li><li data-nav-id=/docs/rosa/custom-alertmanager-4.9/ title="Custom AlertManager in ROSA 4.9.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager-4.9/>Custom AlertManager in ROSA 4.9.x</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-sts/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-sts/>Configuring the Cluster Log Forwarder for CloudWatch Logs and STS</a></li><li data-nav-id=/docs/rosa/ack/ title="Using AWS Controllers for Kubernetes (ACK) on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/ack/>Using AWS Controllers for Kubernetes (ACK) on ROSA</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/ title="ECR Secret Operator" class=dd-item><input type=checkbox id=section-d622abc3689c39008edcc95bca0300b1 class=toggle><label for=section-d622abc3689c39008edcc95bca0300b1></label><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/>ECR Secret Operator</a><ul><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_user/ title="Create IAM user and Policy" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_user/>Create IAM user and Policy</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_assume_role/ title="Create STS Assume Role" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_assume_role/>Create STS Assume Role</a></li></ul></li><li data-nav-id=/docs/rosa/sts/ title="Deploying ROSA in STS mode" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts/>Deploying ROSA in STS mode</a></li><li data-nav-id=/docs/rosa/ecr/ title="Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr/>Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)</a></li><li data-nav-id=/docs/rosa/kms/ title="Creating a ROSA cluster in STS mode with custom KMS key" class=dd-item><a href=https://mobb.ninja/docs/rosa/kms/>Creating a ROSA cluster in STS mode with custom KMS key</a></li><li data-nav-id=/docs/rosa/cluster-metrics-to-aws-prometheus/ title="ROSA - Federating Metrics to AWS Prometheus" class=dd-item><a href=https://mobb.ninja/docs/rosa/cluster-metrics-to-aws-prometheus/>ROSA - Federating Metrics to AWS Prometheus</a></li><li data-nav-id=/docs/rosa/sts-cluster-logging-addon/ title="Work Around to fix the issue with the logging-addon on ROSA STS Clusters" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/>Work Around to fix the issue with the logging-addon on ROSA STS Clusters</a></li><li data-nav-id=/docs/rosa/federated-metrics-prometheus/ title="Federating Metrics to a centralized Prometheus Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics-prometheus/>Federating Metrics to a centralized Prometheus Cluster</a></li><li data-nav-id=/docs/rosa/custom-alertmanager/ title="Custom Alerts in ROSA 4.11.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager/>Custom Alerts in ROSA 4.11.x</a></li><li data-nav-id=/docs/rosa/using-sts-with-aws-services/ title="Extending ROSA STS to include authentication with AWS Services" class=dd-item><a href=https://mobb.ninja/docs/rosa/using-sts-with-aws-services/>Extending ROSA STS to include authentication with AWS Services</a></li><li data-nav-id=/docs/rosa/sts-and-pod-identity/ title="Integrating with AWS resources using Pod Identity" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-and-pod-identity/>Integrating with AWS resources using Pod Identity</a></li><li data-nav-id=/docs/rosa/metrics-to-cloudwatch-agent/ title="Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/metrics-to-cloudwatch-agent/>Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA</a></li><li data-nav-id=/docs/rosa/sts-with-private-link/ title="Creating a ROSA cluster with Private Link enabled (custom VPC) and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-with-private-link/>Creating a ROSA cluster with Private Link enabled (custom VPC) and STS</a></li><li data-nav-id=/docs/rosa/waf/ title="Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS" class=dd-item><input type=checkbox id=section-6293c009b4929ddbd0c9b2918068ea94 class=toggle><label for=section-6293c009b4929ddbd0c9b2918068ea94></label><a href=https://mobb.ninja/docs/rosa/waf/>Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS</a><ul><li data-nav-id=/docs/rosa/waf/alb/ title="AWS ALB" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/alb/>AWS ALB</a></li><li data-nav-id=/docs/rosa/waf/readme-complex/ title="This is a POC of ROSA with a AWS WAF service" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/readme-complex/>This is a POC of ROSA with a AWS WAF service</a></li><li data-nav-id=/docs/rosa/waf/cloud-front/ title="Using CloudFront + WAF" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/cloud-front/>Using CloudFront + WAF</a></li></ul></li><li data-nav-id=/docs/rosa/byo-vpc/ title="Creating a Public/Private BYO VPC for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/byo-vpc/>Creating a Public/Private BYO VPC for ROSA</a></li><li data-nav-id=/docs/rosa/private-link/ title="Creating a ROSA cluster with Private Link enabled" class=dd-item><input type=checkbox id=section-71f53e8bae0a034c83f5c2f0c7c9c315 class=toggle><label for=section-71f53e8bae0a034c83f5c2f0c7c9c315></label><a href=https://mobb.ninja/docs/rosa/private-link/>Creating a ROSA cluster with Private Link enabled</a><ul><li data-nav-id=/docs/rosa/private-link/public-ingress/ title="Adding a Public Ingress endpoint to a ROSA Private-Link Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/private-link/public-ingress/>Adding a Public Ingress endpoint to a ROSA Private-Link Cluster</a></li></ul></li><li data-nav-id=/docs/rosa/federated-metrics/ title="Federating System and User metrics to S3 in Red Hat OpenShift for AWS" class=dd-item><input type=checkbox id=section-9567eab834a47ae397393da72ca0280d class=toggle><label for=section-9567eab834a47ae397393da72ca0280d></label><a href=https://mobb.ninja/docs/rosa/federated-metrics/>Federating System and User metrics to S3 in Red Hat OpenShift for AWS</a><ul><li data-nav-id=/docs/rosa/federated-metrics/user-defined/ title="User Workload Monitoring on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics/user-defined/>User Workload Monitoring on Azure Red Hat OpenShift</a></li></ul></li></ul></li><li data-nav-id=/docs/aro/ title="Azure Red Hat OpenShift" class="dd-item parent"><input type=checkbox id=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a class=toggle checked><label for=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a></label><a href=https://mobb.ninja/docs/aro/>Azure Red Hat OpenShift</a><ul><li data-nav-id=/docs/aro/frontdoor/ title="Azure Front Door with ARO ( Azure Red Hat OpenShift )" class=dd-item><a href=https://mobb.ninja/docs/aro/frontdoor/>Azure Front Door with ARO ( Azure Red Hat OpenShift )</a></li><li data-nav-id=/docs/aro/vpn/ title="Setup a VPN Connection into an ARO Cluster with OpenVPN" class=dd-item><a href=https://mobb.ninja/docs/aro/vpn/>Setup a VPN Connection into an ARO Cluster with OpenVPN</a></li><li data-nav-id=/docs/aro/clf-to-azure/ title="Using Cluster Logging Forwarder in ARO with Azure Monitor" class=dd-item><a href=https://mobb.ninja/docs/aro/clf-to-azure/>Using Cluster Logging Forwarder in ARO with Azure Monitor</a></li><li data-nav-id=/docs/aro/upgrade-disconnected-aro/ title="Upgrade a disconnected ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/upgrade-disconnected-aro/>Upgrade a disconnected ARO cluster</a></li><li data-nav-id=/docs/aro/aro-machinesets/readme/ title="Helm Chart to set up extra MachineSets on ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-machinesets/readme/>Helm Chart to set up extra MachineSets on ARO clusters</a></li><li data-nav-id=/docs/aro/azure-arc-integration/ title="Integrating Azure ARC with ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-arc-integration/>Integrating Azure ARC with ARO</a></li><li data-nav-id=/docs/aro/shipping-logs-and-metrics-to-azure-blob/ title="Shipping logs and metrics to Azure Blob storage" class="dd-item active"><a href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/>Shipping logs and metrics to Azure Blob storage</a></li><li data-nav-id=/docs/aro/azure-service-operator/ title="Azure Service Operator" class=dd-item><input type=checkbox id=section-c4973928d95ad0b6b86b8742709cea9d class=toggle><label for=section-c4973928d95ad0b6b86b8742709cea9d></label><a href=https://mobb.ninja/docs/aro/azure-service-operator/>Azure Service Operator</a><ul><li data-nav-id=/docs/aro/azure-service-operator/v1/ title="Azure Service Operator V1 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v1/>Azure Service Operator V1 in ARO</a></li><li data-nav-id=/docs/aro/azure-service-operator/v2/ title="Azure Service Operator V2 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v2/>Azure Service Operator V2 in ARO</a></li></ul></li><li data-nav-id=/docs/aro/setup-quay/ title="Quay on ARO" class=dd-item><input type=checkbox id=section-107cd49f6d91378e87d08e36d5f67445 class=toggle><label for=section-107cd49f6d91378e87d08e36d5f67445></label><a href=https://mobb.ninja/docs/aro/setup-quay/>Quay on ARO</a><ul><li data-nav-id=/docs/aro/setup-quay/quay-console/ title="Setting up Quay on an ARO cluster via Console" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-console/>Setting up Quay on an ARO cluster via Console</a></li><li data-nav-id=/docs/aro/setup-quay/quay-cli/ title="Setting up Quay on an ARO cluster via CLI" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-cli/>Setting up Quay on an ARO cluster via CLI</a></li></ul></li><li data-nav-id=/docs/aro/add-infra-nodes/ title="Adding infrastructure nodes to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/add-infra-nodes/>Adding infrastructure nodes to an ARO cluster</a></li><li data-nav-id=/docs/aro/azure-policy/ title="Apply Azure Policy to Azure Policy" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-policy/>Apply Azure Policy to Azure Policy</a></li><li data-nav-id=/docs/aro/registry/ title="Accessing the Internal Registry from ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/registry/>Accessing the Internal Registry from ARO</a></li><li data-nav-id=/docs/aro/odf/ title="Configure ARO with OpenShift Data Foundation" class=dd-item><a href=https://mobb.ninja/docs/aro/odf/>Configure ARO with OpenShift Data Foundation</a></li><li data-nav-id=/docs/aro/gpu/ title="ARO with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/aro/gpu/>ARO with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/aro/cert-manager/ title="ARO Custom domain with cert-manager and LetsEncrypt" class=dd-item><a href=https://mobb.ninja/docs/aro/cert-manager/>ARO Custom domain with cert-manager and LetsEncrypt</a></li><li data-nav-id=/docs/aro/ibm-cloud-paks-for-data/ title="ARO IBM Cloud Paks 4 Data" class=dd-item><a href=https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/>ARO IBM Cloud Paks 4 Data</a></li><li data-nav-id=/docs/aro/trident/ title="Trident NetApp operator setup for Azure NetApp files" class=dd-item><a href=https://mobb.ninja/docs/aro/trident/>Trident NetApp operator setup for Azure NetApp files</a></li><li data-nav-id=/docs/aro/managed-upgrade-operator/ title="Enable the Managed Upgrade Operator in ARO and schedule Upgrades" class=dd-item><a href=https://mobb.ninja/docs/aro/managed-upgrade-operator/>Enable the Managed Upgrade Operator in ARO and schedule Upgrades</a></li><li data-nav-id=/docs/aro/additional-ingress-controller/ title="Adding an additional ingress controller to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/additional-ingress-controller/>Adding an additional ingress controller to an ARO cluster</a></li><li data-nav-id=/docs/aro/ocm/ title="Registering an ARO cluster to OpenShift Cluster Manager" class=dd-item><a href=https://mobb.ninja/docs/aro/ocm/>Registering an ARO cluster to OpenShift Cluster Manager</a></li><li data-nav-id=/docs/aro/disaster-recovery/ title="ARO - Considerations for Disaster Recovery" class=dd-item><a href=https://mobb.ninja/docs/aro/disaster-recovery/>ARO - Considerations for Disaster Recovery</a></li><li data-nav-id=/docs/aro/private-cluster/ title="Private ARO Cluster with access via JumpHost" class=dd-item><a href=https://mobb.ninja/docs/aro/private-cluster/>Private ARO Cluster with access via JumpHost</a></li><li data-nav-id=/docs/aro/egress-ipam-operator/ title="Using the Egressip Ipam Operator with a Private ARO Cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/egress-ipam-operator/>Using the Egressip Ipam Operator with a Private ARO Cluster</a></li><li data-nav-id=/docs/aro/federated-metrics/ title="Federating System and User metrics to Azure Files in Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/aro/federated-metrics/>Federating System and User metrics to Azure Files in Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/aro/astronomer/ title="Installing Astronomer on a private ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/astronomer/>Installing Astronomer on a private ARO cluster</a></li></ul></li><li data-nav-id=/docs/misc/ title=Miscellaneous class=dd-item><input type=checkbox id=section-4743293995ef089d075c101a4e477e5c class=toggle><label for=section-4743293995ef089d075c101a4e477e5c></label><a href=https://mobb.ninja/docs/misc/>Miscellaneous</a><ul><li data-nav-id=/docs/misc/cost-management/ title="Red Hat Cost Management for Cloud Services" class=dd-item><a href=https://mobb.ninja/docs/misc/cost-management/>Red Hat Cost Management for Cloud Services</a></li><li data-nav-id=/docs/misc/azure-dev-ops-with-managed-openshift/ title="Azure DevOps with Managed OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/azure-dev-ops-with-managed-openshift/>Azure DevOps with Managed OpenShift</a></li><li data-nav-id=/docs/misc/oadp/ title="MOBB Docs and Guides - oadp" class=dd-item><input type=checkbox id=section-325dd7bf30613094ac338d7da82aacea class=toggle><label for=section-325dd7bf30613094ac338d7da82aacea></label><a href=https://mobb.ninja/docs/misc/oadp/>MOBB Docs and Guides - oadp</a><ul><li data-nav-id=/docs/misc/oadp/rosa-sts/ title="Deploying OpenShift API for Data Protection on a ROSA cluster" class=dd-item><a href=https://mobb.ninja/docs/misc/oadp/rosa-sts/>Deploying OpenShift API for Data Protection on a ROSA cluster</a></li></ul></li><li data-nav-id=/docs/misc/tls-cipher-customization/ title="Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers" class=dd-item><a href=https://mobb.ninja/docs/misc/tls-cipher-customization/>Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers</a></li><li data-nav-id=/docs/misc/jup/ title="Jupyter Notebooks" class=dd-item><input type=checkbox id=section-7af6414e26181825f2ee42d2fad956be class=toggle><label for=section-7af6414e26181825f2ee42d2fad956be></label><a href=https://mobb.ninja/docs/misc/jup/>Jupyter Notebooks</a><ul><li data-nav-id=/docs/misc/jup/buildnotebook/ title="How to deploy Jupyter Notebook" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/buildnotebook/>How to deploy Jupyter Notebook</a></li><li data-nav-id=/docs/misc/jup/opendatahub-gpu/ title="Installing the Open Data Hub Operator" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/opendatahub-gpu/>Installing the Open Data Hub Operator</a></li></ul></li><li data-nav-id=/docs/misc/default-router-custom-domain/ title="Stop default router from serving custom domain routes" class=dd-item><a href=https://mobb.ninja/docs/misc/default-router-custom-domain/>Stop default router from serving custom domain routes</a></li><li data-nav-id=/docs/misc/secrets-store-csi/ title="Installing the Kubernetes Secret Store CSI on OpenShift" class=dd-item><input type=checkbox id=section-83dcfc1bac9347003164dd6ca6bb9da6 class=toggle><label for=section-83dcfc1bac9347003164dd6ca6bb9da6></label><a href=https://mobb.ninja/docs/misc/secrets-store-csi/>Installing the Kubernetes Secret Store CSI on OpenShift</a><ul><li data-nav-id=/docs/misc/secrets-store-csi/hashicorp-vault/ title="Installing the HashiCorp Vault Secret CSI Driver" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/hashicorp-vault/>Installing the HashiCorp Vault Secret CSI Driver</a></li><li data-nav-id=/docs/misc/secrets-store-csi/azure-key-vault/ title="Azure Key Vault CSI on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/azure-key-vault/>Azure Key Vault CSI on Azure Red Hat OpenShift</a></li></ul></li><li data-nav-id=/docs/misc/common-images-namespace/ title="OpenShift - Sharing Common images" class=dd-item><a href=https://mobb.ninja/docs/misc/common-images-namespace/>OpenShift - Sharing Common images</a></li><li data-nav-id=/docs/misc/references/ title="Common Managed OpenShift References / Tasks" class=dd-item><a href=https://mobb.ninja/docs/misc/references/>Common Managed OpenShift References / Tasks</a></li></ul></li><li data-nav-id=/docs/o11y/ title=Observability class=dd-item><input type=checkbox id=section-cf64d50e30bf8c808e1a384a9dd9f94e class=toggle><label for=section-cf64d50e30bf8c808e1a384a9dd9f94e></label><a href=https://mobb.ninja/docs/o11y/>Observability</a><ul><li data-nav-id=/docs/o11y/openshift-logging/ title="OpenShift Logging" class=dd-item><a href=https://mobb.ninja/docs/o11y/openshift-logging/>OpenShift Logging</a></li><li data-nav-id=/docs/o11y/az-log-analytics/ title="Shipping logs to Azure Log Analytics" class=dd-item><a href=https://mobb.ninja/docs/o11y/az-log-analytics/>Shipping logs to Azure Log Analytics</a></li></ul></li><li data-nav-id=/docs/redhat/ title="Other Red Hat Products" class=dd-item><input type=checkbox id=section-61ee77d4a0d9667d2a6b99ce46059f1d class=toggle><label for=section-61ee77d4a0d9667d2a6b99ce46059f1d></label><a href=https://mobb.ninja/docs/redhat/>Other Red Hat Products</a><ul><li data-nav-id=/docs/redhat/rhacs/ title="Deploying Red Hat Advanced Cluster Security in ARO/ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/rhacs/>Deploying Red Hat Advanced Cluster Security in ARO/ROSA</a></li><li data-nav-id=/docs/redhat/acm/ title="Advanced Cluster Management" class=dd-item><input type=checkbox id=section-d7942abe72cdf38022f3b7c824316905 class=toggle><label for=section-d7942abe72cdf38022f3b7c824316905></label><a href=https://mobb.ninja/docs/redhat/acm/>Advanced Cluster Management</a><ul><li data-nav-id=/docs/redhat/acm/submariner/ title="Advanced Cluster Management - Submariner" class=dd-item><input type=checkbox id=section-8144b1f974c3fa53914395fa7463b3ee class=toggle><label for=section-8144b1f974c3fa53914395fa7463b3ee></label><a href=https://mobb.ninja/docs/redhat/acm/submariner/>Advanced Cluster Management - Submariner</a><ul><li data-nav-id=/docs/redhat/acm/submariner/aro/ title="Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/aro/>Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters</a></li><li data-nav-id=/docs/redhat/acm/submariner/rosa/ title="Deploy ACM Submariner for connect overlay networks of ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/rosa/>Deploy ACM Submariner for connect overlay networks of ROSA clusters</a></li></ul></li><li data-nav-id=/docs/redhat/acm/observability/ title="Advanced Cluster Management - Observability" class=dd-item><input type=checkbox id=section-16c8cbcc1de529ce480045089e9bde5c class=toggle><label for=section-16c8cbcc1de529ce480045089e9bde5c></label><a href=https://mobb.ninja/docs/redhat/acm/observability/>Advanced Cluster Management - Observability</a><ul><li data-nav-id=/docs/redhat/acm/observability/rosa/ title="Advanced Cluster Management Observability on ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/observability/rosa/>Advanced Cluster Management Observability on ROSA</a></li></ul></li></ul></li><li data-nav-id=/docs/redhat/crane/ title="Migrate Kubernetes Applications with Konveyer Crane" class=dd-item><a href=https://mobb.ninja/docs/redhat/crane/>Migrate Kubernetes Applications with Konveyer Crane</a></li><li data-nav-id=/docs/redhat/3scale/ title="Deploying 3scale API Management to ROSA and OSD" class=dd-item><a href=https://mobb.ninja/docs/redhat/3scale/>Deploying 3scale API Management to ROSA and OSD</a></li><li data-nav-id=/docs/redhat/gitops/ title="Demonstrate GitOps on Managed OpenShift with ArgoCD" class=dd-item><a href=https://mobb.ninja/docs/redhat/gitops/>Demonstrate GitOps on Managed OpenShift with ArgoCD</a></li></ul></li><li data-nav-id=/docs/gcp/ title="OSD on Google Cloud" class=dd-item><input type=checkbox id=section-34c34dd71fe103bc20cfa9eed6fa905c class=toggle><label for=section-34c34dd71fe103bc20cfa9eed6fa905c></label><a href=https://mobb.ninja/docs/gcp/>OSD on Google Cloud</a><ul><li data-nav-id=/docs/gcp/osd_preexisting_vpc/ title="Creating a OSD in GCP with Existing VPCs" class=dd-item><a href=https://mobb.ninja/docs/gcp/osd_preexisting_vpc/>Creating a OSD in GCP with Existing VPCs</a></li><li data-nav-id=/docs/gcp/filestore/ title="Create Filestore Storage for OSD in GCP" class=dd-item><a href=https://mobb.ninja/docs/gcp/filestore/>Create Filestore Storage for OSD in GCP</a></li></ul></li><li data-nav-id=/docs/idp/ title="Configuring IDP for ROSA, OSD and ARO" class=dd-item><input type=checkbox id=section-de867ba7872b33ba38d343e5be5e3e1c class=toggle><label for=section-de867ba7872b33ba38d343e5be5e3e1c></label><a href=https://mobb.ninja/docs/idp/>Configuring IDP for ROSA, OSD and ARO</a><ul><li data-nav-id=/docs/idp/considerations-aad-ipd/ title="What to consider when using Azure AD as IDP?" class=dd-item><a href=https://mobb.ninja/docs/idp/considerations-aad-ipd/>What to consider when using Azure AD as IDP?</a></li><li data-nav-id=/docs/idp/azuread-aro-cli/ title="Configure Azure AD as an OIDC identity provider for ARO with cli" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro-cli/>Configure Azure AD as an OIDC identity provider for ARO with cli</a></li><li data-nav-id=/docs/idp/azuread-aro/ title="Configure ARO to use Azure AD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro/>Configure ARO to use Azure AD</a></li><li data-nav-id=/docs/idp/azuread/ title="Configure Azure AD as an OIDC identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread/>Configure Azure AD as an OIDC identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/group-claims/ title="MOBB Docs and Guides - group-claims" class=dd-item><input type=checkbox id=section-af199904c6a78739e6598ab72890c976 class=toggle><label for=section-af199904c6a78739e6598ab72890c976></label><a href=https://mobb.ninja/docs/idp/group-claims/>MOBB Docs and Guides - group-claims</a><ul><li data-nav-id=/docs/idp/group-claims/aro/ title="Configure ARO to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/aro/>Configure ARO to use Azure AD Group Claims</a></li><li data-nav-id=/docs/idp/group-claims/rosa/ title="Configure ROSA to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/rosa/>Configure ROSA to use Azure AD Group Claims</a></li></ul></li><li data-nav-id=/docs/idp/okta-grp-sync/ title="Using Group Sync Operator with Okta and ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/okta-grp-sync/>Using Group Sync Operator with Okta and ROSA/OSD</a></li><li data-nav-id=/docs/idp/gitlab-aro/ title="Configure GitLab as an identity provider for ARO" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab-aro/>Configure GitLab as an identity provider for ARO</a></li><li data-nav-id=/docs/idp/gitlab/ title="Configure GitLab as an identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab/>Configure GitLab as an identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/az-ad-grp-sync/ title="Using Group Sync Operator with Azure Active Directory and ROSA" class=dd-item><a href=https://mobb.ninja/docs/idp/az-ad-grp-sync/>Using Group Sync Operator with Azure Active Directory and ROSA</a></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title></div><ul><li><a class=padding href=https://github.com/rh-mobb/documentation target=_blank><i class='fab fa-fw fa-github'></i> Github</a></li><li><a class=padding href=https://github.com/rh-mobb/documentation/archive/refs/heads/main.zip target=_blank><i class='fas fa-fw fa-file-download'></i> Download</a></li><li><a class=padding href=https://www.redhat.com/en/blog target=_blank><i class='fab fa-fw fa-redhat'></i> Red Hat Blog</a></li><li><a class=padding href=https://www.redhat.com/en/contact target=_blank><i class='fas fa-fw fa-user-md'></i> Contact Us</a></li><li><a class=padding href=https://mobb.ninja/tags/ target=_blank><i class='fas fa-fw fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><a class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></a></li><li id=select-variant-container class=footerVariantSwitch><a class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=select-clear></div></a><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><a class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://mobb.ninja/js/clipboard.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/perfect-scrollbar.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/featherlight.min.js?1686327239 defer></script>
<script src=https://mobb.ninja/js/theme.js?1686327239 defer></script></body></html>