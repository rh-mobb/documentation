<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.113.0"><meta name=generator content="Relearn 5.2.3+tip"><meta name=description content><title>ARO with Nvidia GPU Workloads :: Managed OpenShift Black Belt - Unofficial Documentation</title><link href=https://mobb.ninja/docs/aro/gpu/index.xml rel=alternate type=application/rss+xml title="Managed OpenShift Black Belt - Unofficial Documentation"><link href=https://mobb.ninja/css/fontawesome-all.min.css?1689714599 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fontawesome-all.min.css?1689714599 rel=stylesheet></noscript><link href=https://mobb.ninja/css/featherlight.min.css?1689714599 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/featherlight.min.css?1689714599 rel=stylesheet></noscript><link href=https://mobb.ninja/css/auto-complete.css?1689714599 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/auto-complete.css?1689714599 rel=stylesheet></noscript><link href=https://mobb.ninja/css/perfect-scrollbar.min.css?1689714599 rel=stylesheet><link href=https://mobb.ninja/css/nucleus.css?1689714599 rel=stylesheet><link href=https://mobb.ninja/css/fonts.css?1689714599 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fonts.css?1689714599 rel=stylesheet></noscript><link href=https://mobb.ninja/css/theme.css?1689714599 rel=stylesheet><link href=https://mobb.ninja/css/theme-red.css?1689714599 rel=stylesheet id=variant-style><link href=https://mobb.ninja/css/ie.css?1689714599 rel=stylesheet><link href=https://mobb.ninja/css/variant.css?1689714599 rel=stylesheet><link href=https://mobb.ninja/css/print.css?1689714599 rel=stylesheet media=print><script src=https://mobb.ninja/js/variant.js?1689714599></script>
<script>var index_url="https://mobb.ninja/index.json",baseUriFull,root_url="https://mobb.ninja/",baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",baseUriFull="https://mobb.ninja/",window.variants&&variants.init(["red"])</script><script src=https://mobb.ninja/js/jquery.min.js?1689714599 defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WM5QQ0P3P1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WM5QQ0P3P1",{anonymize_ip:!1})}</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=https://mobb.ninja/docs/aro/gpu/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next" href=https://mobb.ninja/docs/aro/cert-manager/ title="ARO Custom domain with cert-manager and LetsEncrypt (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://mobb.ninja/docs/aro/odf/ title="Configure ARO with OpenShift Data Foundation (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=https://mobb.ninja/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=https://mobb.ninja/docs/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=https://mobb.ninja/docs/aro/><span itemprop=name>Azure Red Hat OpenShift</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=https://mobb.ninja/docs/aro/gpu/ aria-disabled=true><span itemprop=name>ARO with Nvidia GPU Workloads</span></a></li></ol></div><div class="default-animation progress"><div class=wrapper><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#helm-prerequisites>Helm Prerequisites</a></li></ul></li><li><a href=#gpu-quota>GPU Quota</a></li><li><a href=#log-in-to-your-aro-cluster>Log in to your ARO cluster</a></li><li><a href=#pull-secret-conditional>Pull secret (Conditional)</a><ul><li><a href=#using-helm>Using Helm</a></li><li><a href=#manually>Manually</a></li></ul></li><li><a href=#gpu-machine-set>GPU Machine Set</a><ul><li><a href=#helm>Helm</a></li><li><a href=#manually-1>Manually</a></li></ul></li><li><a href=#install-nvidia-gpu-operator>Install Nvidia GPU Operator</a><ul><li><a href=#helm-1>Helm</a></li><li><a href=#manually-2>Manually</a></li></ul></li><li><a href=#validate-gpu>Validate GPU</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=https://mobb.ninja/tags/aro>ARO</a>
<a class=tag-link href=https://mobb.ninja/tags/azure>Azure</a>
<a class=tag-link href=https://mobb.ninja/tags/gpu>GPU</a></div></div><style>.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-warning{background-color:#fcf8e3;border-color:#fbeed5;color:#c09853}</style><p class="alert alert-warning"><b>IMPORTANT NOTE</b>: This site is not official Red Hat documentation and is provided for informational purposes only. These guides may be experimental, proof of concept, or early adoption. Officially supported documentation is available at <a href=https://docs.openshift.com target=_blank>docs.openshift.com</a> and <a href=https://access.redhat.com target=_blank>access.redhat.com</a>.</p><article class=default><h1>ARO with Nvidia GPU Workloads</h1><hr><p><b>Authors:</b>
Byron Miller,
Stuart Kirk,
Ricardo Martins<br><b>Last Editor:</b>
Dustin Scott<br><b>Published Date:</b>
22 June 2022<br><b>Modified Date:</b> 25 May 2023</p><hr><p>ARO guide to running Nvidia GPU workloads.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>oc cli</li><li>jq, moreutils, and gettext package</li><li>ARO 4.10</li></ul><p>If you need to install an ARO cluster, please read our <a href=https://mobb.ninja/docs/quickstart-aro/ target=_blank>ARO Quick start guide</a>
. Please be sure if you&rsquo;re installing or using an existing ARO cluster that it is 4.10.x or higher.</p><blockquote><p>As of OpenShift 4.10, it is no longer necessary to set up entitlements to use the nVidia Operator. This has greatly simplified the setup of the cluster for GPU workloads.</p></blockquote><p>Linux:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dnf install jq moreutils gettext
</span></span></code></pre></div><p>MacOS</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>brew install jq moreutils gettext
</span></span></code></pre></div><h3 id=helm-prerequisites>Helm Prerequisites</h3><p>If you plan to use Helm to deploy the GPU operator, you will need do the following</p><ol><li><p>Add the MOBB chart repository to your Helm</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add mobb https://rh-mobb.github.io/helm-charts/
</span></span></code></pre></div></li><li><p>Update your repositories</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo update
</span></span></code></pre></div></li></ol><h2 id=gpu-quota>GPU Quota</h2><p>All GPU quotas in Azure are 0 by default. You will need to login to the azure portal and request GPU quota. There is a lot of competition for GPU workers, so you may have to provision an ARO cluster in a region where you can actually reserve GPU.
ARO supports the following GPU workers:</p><ul><li>NC4as T4 v3</li><li>NC6s v3</li><li>NC8as T4 v3</li><li>NC12s v3</li><li>NC16as T4 v3</li><li>NC24s v3</li><li>NC24rs v3</li><li>NC64as T4 v3</li></ul><blockquote><p>Please remember that when you request quota that Azure is per core. To request a single NC4as T4 v3 node, you will need to request quota in groups of 4. If you wish to request an NC16as T4 v3 you will need to request quota of 16.</p></blockquote><ol><li><p>Login to azure</p><p>Login to <a href=portal.azure.com>portal.azure.com</a>
, type &ldquo;quotas&rdquo; in search by, click on Compute and in the search box type &ldquo;NCAsv3_T4&rdquo;. Select the region your cluster is in (select checkbox) and then click Request quota increase and ask for quota (I chose 8 so i can build two demo clusters of NC4as T4s).</p></li><li><p>Configure quota</p><p><img src=gpu-quota-azure.png alt="GPU Quota Request on Azure"></p></li></ol><h2 id=log-in-to-your-aro-cluster>Log in to your ARO cluster</h2><ol><li><p>Login to OpenShift - we&rsquo;ll use the kubeadmin account here but you can login with your user account as long as you have cluster-admin.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc login &lt;apiserver&gt; -u kubeadmin -p &lt;kubeadminpass&gt;
</span></span></code></pre></div></li></ol><h2 id=pull-secret-conditional>Pull secret (Conditional)</h2><p>We&rsquo;ll update our pull secret to make sure that we can install operators as well as connect to cloud.redhat.com.</p><blockquote><p>If you have already re-created a full pull secret with cloud.redhat.com enabled you can skip this step</p></blockquote><h3 id=using-helm>Using Helm</h3><ol><li><p>Before Deploying the chart you need it to adopt the existing pull secret</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n openshift-config annotate secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> pull-secret meta.helm.sh/release-name<span style=color:#f92672>=</span>pull-secret
</span></span><span style=display:flex><span>kubectl -n openshift-config annotate secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  pull-secret meta.helm.sh/release-namespace<span style=color:#f92672>=</span>openshift-config
</span></span><span style=display:flex><span>kubectl -n openshift-config label secret <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  pull-secret app.kubernetes.io/managed-by<span style=color:#f92672>=</span>Helm
</span></span></code></pre></div></li><li><p>Download your new pull secret from <strong><a href=https://console.redhat.com/openshift/downloads target=_blank>https://console.redhat.com/openshift/downloads</a>
-> Tokens -> Pull secret</strong> and use it to update create the pull secret in your cluster.</p></li><li><p>Update the pull secret</p><blockquote><p>This chart will merge the in-cluster pull secret with the new pull secret.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>helm upgrade --install pull-secret mobb/aro-pull-secret \
</span></span><span style=display:flex><span>  -n openshift-config --set-file pullSecret=$HOME/Downloads/pull-secret.txt
</span></span></code></pre></div></li><li><p>Enable Operator Hub</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc patch configs.samples.operator.openshift.io cluster --type<span style=color:#f92672>=</span>merge <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{&#34;spec&#34;:{&#34;managementState&#34;:&#34;Managed&#34;}}&#39;</span>
</span></span><span style=display:flex><span>oc patch operatorhub cluster --type<span style=color:#f92672>=</span>merge <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{&#34;spec&#34;:{&#34;sources&#34;:[
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;:&#34;redhat-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;:&#34;certified-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;:&#34;community-operators&#34;,&#34;disabled&#34;:false},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;:&#34;redhat-marketplace&#34;,&#34;disabled&#34;:false}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ]}}&#39;</span>
</span></span></code></pre></div></li><li><p>Skip to <a href=#gpu-machine-set>GPU Machine Set</a></p></li></ol><h3 id=manually>Manually</h3><ol><li><p>Log into <a href=cloud.redhat.com>cloud.redhat.com</a></p></li><li><p>Browse to <a href=https://cloud.redhat.com/openshift/install/azure/aro-provisioned target=_blank>https://cloud.redhat.com/openshift/install/azure/aro-provisioned</a></p></li><li><p>click the <strong>Download pull secret</strong> button and save it as pull-secret.txt</p><blockquote><p>The following steps will need to be ran in the same working directory as your pull-secret.txt</p></blockquote></li><li><p>Export existing pull secret</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get secret pull-secret -n openshift-config -o json | jq -r <span style=color:#e6db74>&#39;.data.&#34;.dockerconfigjson&#34;&#39;</span> | base64 --decode &gt; export-pull.json
</span></span></code></pre></div></li><li><p>Merge downloaded pull secret with system pull secret to add cloud.redhat.com</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq -s <span style=color:#e6db74>&#39;.[0] * .[1]&#39;</span> export-pull.json pull-secret.txt | tr -d <span style=color:#e6db74>&#34;\n\r&#34;</span> &gt; new-pull-secret.json
</span></span></code></pre></div></li><li><p>Upload new secret file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc set data secret/pull-secret -n openshift-config --from-file<span style=color:#f92672>=</span>.dockerconfigjson<span style=color:#f92672>=</span>new-pull-secret.json
</span></span></code></pre></div></li></ol><blockquote><p>You may need to wait for about ~1hr for everything to sync up with cloud.redhat.com.</p></blockquote><ol><li><p>Delete secrets</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>rm pull-secret.txt export-pull.json new-pull-secret.json
</span></span></code></pre></div></li></ol><h2 id=gpu-machine-set>GPU Machine Set</h2><p>ARO still uses Kubernetes Machinsets to create a machine set. I&rsquo;m going to export the first machine set in my cluster (az 1) and use that as a template to build a single GPU machine in southcentralus region 1.</p><h3 id=helm>Helm</h3><ol><li><p>Create a new machine-set (replicas of 1), see the Chart&rsquo;s <a href=https://github.com/rh-mobb/helm-charts/blob/main/charts/aro-gpu/values.yaml target=_blank>values</a>
file for configuration options</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>helm upgrade --install -n openshift-machine-api \
</span></span><span style=display:flex><span>   gpu mobb/aro-gpu
</span></span></code></pre></div></li><li><p>Switch to the proper namespace (project):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc project openshift-machine-api
</span></span></code></pre></div></li><li><p>Wait for the new GPU nodes to be available</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>watch oc get machines
</span></span></code></pre></div></li><li><p>Skip to <a href=#install-nvidia-gpu-operator>Install Nvidia GPU Operator</a></p></li></ol><h3 id=manually-1>Manually</h3><ol><li><p>View existing machine sets</p><blockquote><p>For ease of set up, I&rsquo;m going to grab the first machine set and use that as the one I will clone to create our GPU machine set.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>MACHINESET<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc get machineset -n openshift-machine-api -o<span style=color:#f92672>=</span>jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[0]}&#39;</span> | jq -r <span style=color:#e6db74>&#39;[.metadata.name] | @tsv&#39;</span><span style=color:#66d9ef>)</span>
</span></span></code></pre></div></li><li><p>Save a copy of example machine set</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get machineset -n openshift-machine-api $MACHINESET -o json &gt; gpu_machineset.json
</span></span></code></pre></div></li><li><p>Change the .metadata.name field to a new unique name</p><blockquote><p>I&rsquo;m going to create a unique name for this single node machine set that shows nvidia-worker-<region><az> that follows a similar pattern as all the other machine sets.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.metadata.name = &#34;nvidia-worker-southcentralus1&#34;&#39;</span> gpu_machineset.json| sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Ensure spec.replicas matches the desired replica count for the MachineSet</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.spec.replicas = 1&#39;</span> gpu_machineset.json| sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Change the .spec.selector.matchLabels.machine.openshift.io/cluster-api-machineset field to match the .metadata.name field</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.spec.selector.matchLabels.&#34;machine.openshift.io/cluster-api-machineset&#34; = &#34;nvidia-worker-southcentralus1&#34;&#39;</span> gpu_machineset.json| sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Change the .spec.template.metadata.labels.machine.openshift.io/cluster-api-machineset to match the .metadata.name field</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.spec.template.metadata.labels.&#34;machine.openshift.io/cluster-api-machineset&#34; = &#34;nvidia-worker-southcentralus1&#34;&#39;</span> gpu_machineset.json| sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Change the spec.template.spec.providerSpec.value.vmSize to match the desired GPU instance type from Azure.</p><blockquote><p>The machine we&rsquo;re using is Standard_NC4as_T4_v3.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.spec.template.spec.providerSpec.value.vmSize = &#34;Standard_NC4as_T4_v3&#34;&#39;</span> gpu_machineset.json | sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Change the spec.template.spec.providerSpec.value.zone to match the desired zone from Azure</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;.spec.template.spec.providerSpec.value.zone = &#34;1&#34;&#39;</span> gpu_machineset.json | sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Delete the .status section of the yaml file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>jq <span style=color:#e6db74>&#39;del(.status)&#39;</span> gpu_machineset.json | sponge gpu_machineset.json
</span></span></code></pre></div></li><li><p>Verify the other data in the yaml file.</p></li></ol><h4 id=create-gpu-machine-set>Create GPU machine set</h4><p>These steps will create the new GPU machine. It may take 10-15 minutes to provision a new GPU machine. If this step fails, please login to the <a href=https://portal.azure.com target=_blank>azure portal</a>
and ensure you didn&rsquo;t run across availability issues. You can go &ldquo;Virtual Machines&rdquo; and search for the worker name you created above to see the status of VMs.</p><ol><li><p>Create GPU Machine set</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc create -f gpu_machineset.json
</span></span></code></pre></div><blockquote><p>This command will take a few minutes to complete.</p></blockquote></li><li><p>Verify GPU machine set</p><p>Machines should be getting deployed. You can view the status of the machine set with the following commands</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get machineset -n openshift-machine-api
</span></span><span style=display:flex><span>oc get machine -n openshift-machine-api
</span></span></code></pre></div><p>Once the machines are provisioned, which could take 5-15 minutes, machines will show as nodes in the node list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get nodes
</span></span></code></pre></div><p>You should see a node with the &ldquo;nvidia-worker-southcentralus1&rdquo; name it we created earlier.</p></li></ol><h2 id=install-nvidia-gpu-operator>Install Nvidia GPU Operator</h2><p>This will create the nvidia-gpu-operator name space, set up the operator group and install the Nvidia GPU Operator.</p><h3 id=helm-1>Helm</h3><ol><li><p>Create namespaces</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc create namespace openshift-nfd
</span></span><span style=display:flex><span>oc create namespace nvidia-gpu-operator
</span></span></code></pre></div></li><li><p>Use the <code>mobb/operatorhub</code> chart to deploy the needed operators</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade -n nvidia-gpu-operator nvidia-gpu-operator <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  mobb/operatorhub --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --values https://raw.githubusercontent.com/rh-mobb/helm-charts/main/charts/nvidia-gpu/files/operatorhub.yaml
</span></span></code></pre></div></li><li><p>Wait until the two operators are running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>watch kubectl get pods -n openshift-nfd
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>nfd-controller-manager-7b66c67bd9-rk98w   2/2     Running   0          47s
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>watch oc get pods -n nvidia-gpu-operator
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME                            READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>gpu-operator-5d8cb7dd5f-c4ljk   1/1     Running   0          87s
</span></span></code></pre></div></li><li><p>Install the Nvidia GPU Operator chart</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>helm upgrade --install -n nvidia-gpu-operator nvidia-gpu <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  mobb/nvidia-gpu --disable-openapi-validation
</span></span></code></pre></div></li><li><p>Skip to <a href=#validate-gpu>Validate GPU</a></p></li></ol><h3 id=manually-2>Manually</h3><ol><li><p>Create Nvidia namespace</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Namespace</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nvidia-gpu-operator</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Create Operator Group</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>operators.coreos.com/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>OperatorGroup</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nvidia-gpu-operator-group</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>nvidia-gpu-operator</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>targetNamespaces</span>:
</span></span><span style=display:flex><span> - <span style=color:#ae81ff>nvidia-gpu-operator</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Get latest nvidia channel</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>CHANNEL<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc get packagemanifest gpu-operator-certified -n openshift-marketplace -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.status.defaultChannel}&#39;</span><span style=color:#66d9ef>)</span>
</span></span></code></pre></div></li></ol><blockquote><p>If your cluster was created without providing the pull secret, the cluster won&rsquo;t include samples or operators from Red Hat or from certified partners. This will result in the following error message:</p><p><em>Error from server (NotFound): packagemanifests.packages.operators.coreos.com &ldquo;gpu-operator-certified&rdquo; not found.</em></p><p>To add your Red Hat pull secret on an Azure Red Hat OpenShift cluster, <a href=https://learn.microsoft.com/en-us/azure/openshift/howto-add-update-pull-secret target=_blank>follow this guidance</a>
.</p></blockquote><ol><li><p>Get latest nvidia package</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>PACKAGE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc get packagemanifests/gpu-operator-certified -n openshift-marketplace -ojson | jq -r <span style=color:#e6db74>&#39;.status.channels[] | select(.name == &#34;&#39;</span>$CHANNEL<span style=color:#e6db74>&#39;&#34;) | .currentCSV&#39;</span><span style=color:#66d9ef>)</span>
</span></span></code></pre></div></li><li><p>Create Subscription</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>envsubst  &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Subscription</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>gpu-operator-certified</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>nvidia-gpu-operator</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>channel</span>: <span style=color:#e6db74>&#34;$CHANNEL&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>installPlanApproval</span>: <span style=color:#ae81ff>Automatic</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>gpu-operator-certified</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>source</span>: <span style=color:#ae81ff>certified-operators</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sourceNamespace</span>: <span style=color:#ae81ff>openshift-marketplace</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>startingCSV</span>: <span style=color:#e6db74>&#34;$PACKAGE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Wait for Operator to finish installing</p><blockquote><p>Don&rsquo;t proceed until you have verified that the operator has finished installing. It&rsquo;s also a good point to ensure that your GPU worker is online.</p></blockquote><p><img src=nvidia-installed.png alt="Verify Operator"></p></li></ol><h4 id=install-node-feature-discovery-operator>Install Node Feature Discovery Operator</h4><p>The node feature discovery operator will discover the GPU on your nodes and appropriately label the nodes so you can target them for workloads. We&rsquo;ll install the NFD operator into the opneshift-ndf namespace and create the &ldquo;subscription&rdquo; which is the configuration for NFD.</p><p>Official Documentation for Installing <a href=https://docs.openshift.com/container-platform/4.10/hardware_enablement/psap-node-feature-discovery-operator.html target=_blank>Node Feature Discovery Operator</a></p><ol><li><p>Set up Name Space</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Namespace</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>openshift-nfd</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Create OperatorGroup</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>operators.coreos.com/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>OperatorGroup</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>generateName</span>: <span style=color:#ae81ff>openshift-nfd-</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>openshift-nfd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>openshift-nfd</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Create Subscription</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>operators.coreos.com/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Subscription</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>openshift-nfd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>channel</span>: <span style=color:#e6db74>&#34;stable&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>installPlanApproval</span>: <span style=color:#ae81ff>Automatic</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>source</span>: <span style=color:#ae81ff>redhat-operators</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sourceNamespace</span>: <span style=color:#ae81ff>openshift-marketplace</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Wait for Node Feature discovery to complete installation</p><p>You can login to your openshift console and view operators or simply wait a few minutes. The next step will error until the operator has finished installing.</p></li><li><p>Create NFD Instance</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>NodeFeatureDiscovery</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>nfd.openshift.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfd-instance</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>openshift-nfd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>customConfig</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>configData</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;more.kernel.features&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - loadedKMod: [&#34;example_kmod3&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;more.features.by.nodename&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      value: customValue
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - nodename: [&#34;special-.*-node-.*&#34;]</span>      
</span></span><span style=display:flex><span>  <span style=color:#f92672>operand</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: &gt;-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      registry.redhat.io/openshift4/ose-node-feature-discovery@sha256:07658ef3df4b264b02396e67af813a52ba416b47ab6e1d2d08025a350ccd2b7b</span>      
</span></span><span style=display:flex><span>    <span style=color:#f92672>servicePort</span>: <span style=color:#ae81ff>12000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>workerConfig</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>configData</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      core:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  labelWhiteList:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  noPublish: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        sleepInterval: 60s
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  sources: [all]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  klog:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    addDirHeader: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    alsologtostderr: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    logBacktraceAt:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    logtostderr: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    skipHeaders: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    stderrthreshold: 2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    v: 0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    vmodule:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ##   NOTE: the following options are not dynamically run-time
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ##          configurable and require a nfd-worker restart to take effect
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ##          after being changed
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    logDir:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    logFile:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    logFileMaxSize: 1800
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    skipLogHeaders: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      sources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  cpu:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    cpuid:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ##     NOTE: whitelist has priority over blacklist
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      attributeBlacklist:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;BMI1&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;BMI2&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;CLMUL&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;CMOV&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;CX16&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;ERMS&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;F16C&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;HTT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;LZCNT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;MMX&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;MMXEXT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;NX&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;POPCNT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;RDRAND&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;RDSEED&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;RDTSCP&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SGX&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSE&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSE2&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSE3&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSE4.1&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSE4.2&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - &#34;SSSE3&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      attributeWhitelist:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  kernel:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    kconfigFile: &#34;/path/to/kconfig&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    configOpts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;NO_HZ&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;X86&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;DMI&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pci:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          deviceClassWhitelist:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - &#34;0200&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - &#34;03&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - &#34;12&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          deviceLabelFields:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;class&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - &#34;vendor&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;device&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;subsystem_vendor&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;subsystem_device&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  usb:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    deviceClassWhitelist:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;0e&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;ef&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;fe&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;ff&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    deviceLabelFields:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;class&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;vendor&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      - &#34;device&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #  custom:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;my.kernel.feature&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - loadedKMod: [&#34;example_kmod1&#34;, &#34;example_kmod2&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;my.pci.feature&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - pciId:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            class: [&#34;0200&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            vendor: [&#34;15b3&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            device: [&#34;1014&#34;, &#34;1017&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - pciId :
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            vendor: [&#34;8086&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            device: [&#34;1000&#34;, &#34;1100&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;my.usb.feature&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - usbId:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          class: [&#34;ff&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          vendor: [&#34;03e7&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          device: [&#34;2485&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - usbId:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          class: [&#34;fe&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          vendor: [&#34;1a6e&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          device: [&#34;089a&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #    - name: &#34;my.combined.feature&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #      matchOn:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #        - pciId:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            vendor: [&#34;15b3&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #            device: [&#34;1014&#34;, &#34;1017&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      #          loadedKMod : [&#34;vendor_kmod1&#34;, &#34;vendor_kmod2&#34;]</span>      
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Verify NFD is ready.</p><p>This operator should say Available in the status</p><p><img src=nfd-ready-for-use.png alt="NFD Operator Ready"></p></li></ol><h4 id=apply-nvidia-cluster-config>Apply nVidia Cluster Config</h4><p>We&rsquo;ll now apply the nvidia cluster config. Please read the <a href=https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/openshift/install-gpu-ocp.html target=_blank>nvidia documentation</a>
on customizing this if you have your own private repos or specific settings. This will be another process that takes a few minutes to complete.</p><ol><li><p>Apply cluster config</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>nvidia.com/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterPolicy</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>gpu-cluster-policy</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>migManager</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>operator</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>defaultRuntime</span>: <span style=color:#ae81ff>crio</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>initContainer</span>: {}
</span></span><span style=display:flex><span>    <span style=color:#f92672>runtimeClass</span>: <span style=color:#ae81ff>nvidia</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deployGFD</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>dcgm</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>gfd</span>: {}
</span></span><span style=display:flex><span>  <span style=color:#f92672>dcgmExporter</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>driver</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>licensingConfig</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>nlsEnabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>configMapName</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>certConfig</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>kernelModuleConfig</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>repoConfig</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>configMapName</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>virtualTopology</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>config</span>: <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>use_ocp_driver_toolkit</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>devicePlugin</span>: {}
</span></span><span style=display:flex><span>  <span style=color:#f92672>mig</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategy</span>: <span style=color:#ae81ff>single</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>validator</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>plugin</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>WITH_WORKLOAD</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#39;true&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>nodeStatusExporter</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>daemonsets</span>: {}
</span></span><span style=display:flex><span>  <span style=color:#f92672>toolkit</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>Verify Cluster Policy</p><p>Login to OpenShift console and browse to operators and make sure you&rsquo;re in nvidia-gpu-operator namespace. You should see it say State: Ready once everything is complete.</p><p><img src=nvidia-cluster-policy.png alt="cluster policy"></p></li></ol><h2 id=validate-gpu>Validate GPU</h2><p>It may take some time for the nVidia Operator and NFD to completely install and self-identify the machines. These commands can be ran to help validate that everything is running as expected.</p><ol><li><p>Verify NFD can see your GPU(s)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc describe node | egrep <span style=color:#e6db74>&#39;Roles|pci-10de&#39;</span> | grep -v master
</span></span></code></pre></div><p>You should see output like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>Roles:              worker
</span></span><span style=display:flex><span>                feature.node.kubernetes.io/pci-10de.present<span style=color:#f92672>=</span>true
</span></span></code></pre></div></li><li><p>Verify node labels</p><p>You can see the node labels by logging into the OpenShift console -> Compute -> Nodes -> nvidia-worker-southcentralus1-<id>. You should see a bunch of nvidia GPU labels and the pci-10de device from above.</p><p><img src=node-labels.png alt="NFD Node labels"></p></li><li><p>Nvidia SMI tool verification</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc project nvidia-gpu-operator
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#66d9ef>$(</span>oc get pod -lopenshift.driver-toolkit<span style=color:#f92672>=</span>true --no-headers |awk <span style=color:#e6db74>&#39;{print $1}&#39;</span><span style=color:#66d9ef>)</span>; <span style=color:#66d9ef>do</span> echo $i; oc exec -it $i -- nvidia-smi ; echo -e <span style=color:#e6db74>&#39;\n&#39;</span> ;  <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>You should see output that shows the GPUs available on the host such as this example screenshot. (Varies depending on GPU worker type)</p><p><img src=test-gpu.png alt="Nvidia SMI"></p></li><li><p>Create Pod to run a GPU workload</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>oc project nvidia-gpu-operator</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>cat &lt;&lt;EOF | oc apply -f -</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Pod</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>cuda-vector-add</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>restartPolicy</span>: <span style=color:#ae81ff>OnFailure</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>cuda-vector-add</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>: <span style=color:#e6db74>&#34;quay.io/giantswarm/nvidia-gpu-demo:latest&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>limits</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>nvidia.com/gpu</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>nodeSelector</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>nvidia.com/gpu.present</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>EOF</span>
</span></span></code></pre></div></li><li><p>View logs</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc logs cuda-vector-add --tail<span style=color:#f92672>=</span>-1
</span></span></code></pre></div><blockquote><p>Please note, if you get an error &ldquo;Error from server (BadRequest): container &ldquo;cuda-vector-add&rdquo; in pod &ldquo;cuda-vector-add&rdquo; is waiting to start: ContainerCreating&rdquo;, try running &ldquo;oc delete pod cuda-vector-add&rdquo; and then re-run the create statement above. I&rsquo;ve seen issues where if this step is ran before all of the operator consolidation is done it may just sit there.</p></blockquote><p>You should see Output like the following (mary vary depending on GPU):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>Vector addition of <span style=color:#ae81ff>5000</span> elements<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Copy input data from the host memory to the CUDA device
</span></span><span style=display:flex><span>CUDA kernel launch with <span style=color:#ae81ff>196</span> blocks of <span style=color:#ae81ff>256</span> threads
</span></span><span style=display:flex><span>Copy output data from the CUDA device to the host memory
</span></span><span style=display:flex><span>Test PASSED
</span></span><span style=display:flex><span>Done
</span></span></code></pre></div></li><li><p>If successful, the pod can be deleted</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc delete pod cuda-vector-add
</span></span></code></pre></div></li></ol><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-wrapper class=default-animation><div id=header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:80%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=https://mobb.ninja/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M341.52 285.56c33.65.0 82.34-6.94 82.34-47 .22-6.74.86-1.82-20.88-96.24-4.62-19.15-8.68-27.84-42.31-44.65-26.09-13.34-82.92-35.37-99.73-35.37-15.66.0-20.2 20.17-38.87 20.17-18 0-31.31-15.06-48.12-15.06-16.14.0-26.66 11-34.78 33.62-27.5 77.55-26.28 74.27-26.12 78.27.0 24.8 97.64 106.11 228.47 106.11M429 254.84c4.65 22 4.65 24.35 4.65 27.25.0 37.66-42.33 58.56-98 58.56-125.74.08-235.91-73.65-235.91-122.33a49.55 49.55.0 014.06-19.72C58.56 200.86.0 208.93.0 260.63c0 84.67 200.63 189 359.49 189 121.79.0 152.51-55.08 152.51-98.58.0-34.21-29.59-73.05-82.93-96.24"/></svg>MOBB Ninja</a></div><div class="searchbox default-animation"><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=https://mobb.ninja/js/auto-complete.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/lunr.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/lunr.stemmer.support.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/lunr.multi.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/lunr.en.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/search.js?1689714599 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=https://mobb.ninja/><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics collapsible-menu"><li data-nav-id=/docs/ title="Documentation from the MOBB" class="dd-item parent"><input type=checkbox id=section-2f67fdc9a362fd86f1cfd4450ed56551 class=toggle checked><label for=section-2f67fdc9a362fd86f1cfd4450ed56551></label><a href=https://mobb.ninja/docs/>Documentation from the MOBB</a><ul><li data-nav-id=/docs/quickstart-aro/ title="ARO Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-aro/>ARO Quickstart</a></li><li data-nav-id=/docs/quickstart-rosa/ title="ROSA Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-rosa/>ROSA Quickstart</a></li><li data-nav-id=/docs/rosa/ title="Red Hat Openshift Service on AWS" class=dd-item><input type=checkbox id=section-d82bea3b793597b6ff01917e2ad59aae class=toggle><label for=section-d82bea3b793597b6ff01917e2ad59aae></label><a href=https://mobb.ninja/docs/rosa/>Red Hat Openshift Service on AWS</a><ul><li data-nav-id=/docs/rosa/rosa-gitops/ title="Creating ROSA Components with GitOps" class=dd-item><a href=https://mobb.ninja/docs/rosa/rosa-gitops/>Creating ROSA Components with GitOps</a></li><li data-nav-id=/docs/rosa/aws-secrets-manager-csi/ title="Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-secrets-manager-csi/>Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS</a></li><li data-nav-id=/docs/rosa/aws-efs/ title="Enabling the AWS EFS CSI Driver Operator on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-efs/>Enabling the AWS EFS CSI Driver Operator on ROSA</a></li><li data-nav-id=/docs/rosa/egress-ip/ title="Assign Consistent Egress IP for External Traffic" class=dd-item><a href=https://mobb.ninja/docs/rosa/egress-ip/>Assign Consistent Egress IP for External Traffic</a></li><li data-nav-id=/docs/rosa/gpu/ title="ROSA with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/rosa/gpu/>ROSA with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/rosa/external-dns/ title="External DNS for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/external-dns/>External DNS for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/aws-load-balancer-operator/ title="AWS Load Balancer Operator On ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-load-balancer-operator/>AWS Load Balancer Operator On ROSA</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-vector/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-vector/>Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector</a></li><li data-nav-id=/docs/rosa/dynamic-certificates/ title="Dynamic Certificates for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/dynamic-certificates/>Dynamic Certificates for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/verify-permissions/ title="Verify Permissions for ROSA STS Deployment" class=dd-item><a href=https://mobb.ninja/docs/rosa/verify-permissions/>Verify Permissions for ROSA STS Deployment</a></li><li data-nav-id=/docs/rosa/sts-oidc-flow/ title="STS OIDC in ROSA : How it works!" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-oidc-flow/>STS OIDC in ROSA : How it works!</a></li><li data-nav-id=/docs/rosa/security-ra/ title="Security Reference Architecture for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/security-ra/>Security Reference Architecture for ROSA</a></li><li data-nav-id=/docs/rosa/custom-alertmanager-4.9/ title="Custom AlertManager in ROSA 4.9.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager-4.9/>Custom AlertManager in ROSA 4.9.x</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-sts/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-sts/>Configuring the Cluster Log Forwarder for CloudWatch Logs and STS</a></li><li data-nav-id=/docs/rosa/ack/ title="Using AWS Controllers for Kubernetes (ACK) on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/ack/>Using AWS Controllers for Kubernetes (ACK) on ROSA</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/ title="ECR Secret Operator" class=dd-item><input type=checkbox id=section-d622abc3689c39008edcc95bca0300b1 class=toggle><label for=section-d622abc3689c39008edcc95bca0300b1></label><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/>ECR Secret Operator</a><ul><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_user/ title="Create IAM user and Policy" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_user/>Create IAM user and Policy</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_assume_role/ title="Create STS Assume Role" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_assume_role/>Create STS Assume Role</a></li></ul></li><li data-nav-id=/docs/rosa/sts/ title="Deploying ROSA in STS mode" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts/>Deploying ROSA in STS mode</a></li><li data-nav-id=/docs/rosa/ecr/ title="Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr/>Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)</a></li><li data-nav-id=/docs/rosa/kms/ title="Creating a ROSA cluster in STS mode with custom KMS key" class=dd-item><a href=https://mobb.ninja/docs/rosa/kms/>Creating a ROSA cluster in STS mode with custom KMS key</a></li><li data-nav-id=/docs/rosa/cluster-metrics-to-aws-prometheus/ title="ROSA - Federating Metrics to AWS Prometheus" class=dd-item><a href=https://mobb.ninja/docs/rosa/cluster-metrics-to-aws-prometheus/>ROSA - Federating Metrics to AWS Prometheus</a></li><li data-nav-id=/docs/rosa/sts-cluster-logging-addon/ title="Work Around to fix the issue with the logging-addon on ROSA STS Clusters" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/>Work Around to fix the issue with the logging-addon on ROSA STS Clusters</a></li><li data-nav-id=/docs/rosa/federated-metrics-prometheus/ title="Federating Metrics to a centralized Prometheus Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics-prometheus/>Federating Metrics to a centralized Prometheus Cluster</a></li><li data-nav-id=/docs/rosa/custom-alertmanager/ title="Custom Alerts in ROSA 4.11.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager/>Custom Alerts in ROSA 4.11.x</a></li><li data-nav-id=/docs/rosa/using-sts-with-aws-services/ title="Extending ROSA STS to include authentication with AWS Services" class=dd-item><a href=https://mobb.ninja/docs/rosa/using-sts-with-aws-services/>Extending ROSA STS to include authentication with AWS Services</a></li><li data-nav-id=/docs/rosa/sts-and-pod-identity/ title="Integrating with AWS resources using Pod Identity" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-and-pod-identity/>Integrating with AWS resources using Pod Identity</a></li><li data-nav-id=/docs/rosa/metrics-to-cloudwatch-agent/ title="Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/metrics-to-cloudwatch-agent/>Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA</a></li><li data-nav-id=/docs/rosa/sts-with-private-link/ title="Creating a ROSA cluster with Private Link enabled (custom VPC) and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-with-private-link/>Creating a ROSA cluster with Private Link enabled (custom VPC) and STS</a></li><li data-nav-id=/docs/rosa/waf/ title="Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS" class=dd-item><input type=checkbox id=section-6293c009b4929ddbd0c9b2918068ea94 class=toggle><label for=section-6293c009b4929ddbd0c9b2918068ea94></label><a href=https://mobb.ninja/docs/rosa/waf/>Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS</a><ul><li data-nav-id=/docs/rosa/waf/alb/ title="AWS ALB" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/alb/>AWS ALB</a></li><li data-nav-id=/docs/rosa/waf/readme-complex/ title="This is a POC of ROSA with a AWS WAF service" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/readme-complex/>This is a POC of ROSA with a AWS WAF service</a></li><li data-nav-id=/docs/rosa/waf/cloud-front/ title="Using CloudFront + WAF" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/cloud-front/>Using CloudFront + WAF</a></li></ul></li><li data-nav-id=/docs/rosa/byo-vpc/ title="Creating a Public/Private BYO VPC for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/byo-vpc/>Creating a Public/Private BYO VPC for ROSA</a></li><li data-nav-id=/docs/rosa/private-link/ title="Creating a ROSA cluster with Private Link enabled" class=dd-item><input type=checkbox id=section-71f53e8bae0a034c83f5c2f0c7c9c315 class=toggle><label for=section-71f53e8bae0a034c83f5c2f0c7c9c315></label><a href=https://mobb.ninja/docs/rosa/private-link/>Creating a ROSA cluster with Private Link enabled</a><ul><li data-nav-id=/docs/rosa/private-link/public-ingress/ title="Adding a Public Ingress endpoint to a ROSA Private-Link Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/private-link/public-ingress/>Adding a Public Ingress endpoint to a ROSA Private-Link Cluster</a></li></ul></li><li data-nav-id=/docs/rosa/federated-metrics/ title="Federating System and User metrics to S3 in Red Hat OpenShift for AWS" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics/>Federating System and User metrics to S3 in Red Hat OpenShift for AWS</a></li></ul></li><li data-nav-id=/docs/aro/ title="Azure Red Hat OpenShift" class="dd-item parent"><input type=checkbox id=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a class=toggle checked><label for=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a></label><a href=https://mobb.ninja/docs/aro/>Azure Red Hat OpenShift</a><ul><li data-nav-id=/docs/aro/private_endpoint/ title="Configure a Private ARO cluster with Azure File via a Private Endpoint" class=dd-item><a href=https://mobb.ninja/docs/aro/private_endpoint/>Configure a Private ARO cluster with Azure File via a Private Endpoint</a></li><li data-nav-id=/docs/aro/aro-acr/ title="Using Azure Container Registry in Private ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-acr/>Using Azure Container Registry in Private ARO clusters</a></li><li data-nav-id=/docs/aro/frontdoor/ title="Azure Front Door with ARO ( Azure Red Hat OpenShift )" class=dd-item><a href=https://mobb.ninja/docs/aro/frontdoor/>Azure Front Door with ARO ( Azure Red Hat OpenShift )</a></li><li data-nav-id=/docs/aro/vpn/ title="Setup a VPN Connection into an ARO Cluster with OpenVPN" class=dd-item><a href=https://mobb.ninja/docs/aro/vpn/>Setup a VPN Connection into an ARO Cluster with OpenVPN</a></li><li data-nav-id=/docs/aro/clf-to-azure/ title="Using Cluster Logging Forwarder in ARO with Azure Monitor" class=dd-item><a href=https://mobb.ninja/docs/aro/clf-to-azure/>Using Cluster Logging Forwarder in ARO with Azure Monitor</a></li><li data-nav-id=/docs/aro/upgrade-disconnected-aro/ title="Upgrade a disconnected ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/upgrade-disconnected-aro/>Upgrade a disconnected ARO cluster</a></li><li data-nav-id=/docs/aro/aro-machinesets/readme/ title="Helm Chart to set up extra MachineSets on ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-machinesets/readme/>Helm Chart to set up extra MachineSets on ARO clusters</a></li><li data-nav-id=/docs/aro/azure-arc-integration/ title="Integrating Azure ARC with ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-arc-integration/>Integrating Azure ARC with ARO</a></li><li data-nav-id=/docs/aro/static-ip-load-balancer/ title="Configure a load balancer service to use a static public IP" class=dd-item><a href=https://mobb.ninja/docs/aro/static-ip-load-balancer/>Configure a load balancer service to use a static public IP</a></li><li data-nav-id=/docs/aro/shipping-logs-and-metrics-to-azure-blob/ title="Shipping logs and metrics to Azure Blob storage" class=dd-item><a href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/>Shipping logs and metrics to Azure Blob storage</a></li><li data-nav-id=/docs/aro/azure-service-operator/ title="Azure Service Operator" class=dd-item><input type=checkbox id=section-c4973928d95ad0b6b86b8742709cea9d class=toggle><label for=section-c4973928d95ad0b6b86b8742709cea9d></label><a href=https://mobb.ninja/docs/aro/azure-service-operator/>Azure Service Operator</a><ul><li data-nav-id=/docs/aro/azure-service-operator/v1/ title="Azure Service Operator V1 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v1/>Azure Service Operator V1 in ARO</a></li><li data-nav-id=/docs/aro/azure-service-operator/v2/ title="Azure Service Operator V2 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v2/>Azure Service Operator V2 in ARO</a></li></ul></li><li data-nav-id=/docs/aro/setup-quay/ title="Quay on ARO" class=dd-item><input type=checkbox id=section-107cd49f6d91378e87d08e36d5f67445 class=toggle><label for=section-107cd49f6d91378e87d08e36d5f67445></label><a href=https://mobb.ninja/docs/aro/setup-quay/>Quay on ARO</a><ul><li data-nav-id=/docs/aro/setup-quay/quay-console/ title="Setting up Quay on an ARO cluster via Console" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-console/>Setting up Quay on an ARO cluster via Console</a></li><li data-nav-id=/docs/aro/setup-quay/quay-cli/ title="Setting up Quay on an ARO cluster via CLI" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-cli/>Setting up Quay on an ARO cluster via CLI</a></li></ul></li><li data-nav-id=/docs/aro/add-infra-nodes/ title="Adding infrastructure nodes to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/add-infra-nodes/>Adding infrastructure nodes to an ARO cluster</a></li><li data-nav-id=/docs/aro/azure-policy/ title="Apply Azure Policy to Azure Policy" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-policy/>Apply Azure Policy to Azure Policy</a></li><li data-nav-id=/docs/aro/registry/ title="Accessing the Internal Registry from ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/registry/>Accessing the Internal Registry from ARO</a></li><li data-nav-id=/docs/aro/odf/ title="Configure ARO with OpenShift Data Foundation" class=dd-item><a href=https://mobb.ninja/docs/aro/odf/>Configure ARO with OpenShift Data Foundation</a></li><li data-nav-id=/docs/aro/gpu/ title="ARO with Nvidia GPU Workloads" class="dd-item active"><a href=https://mobb.ninja/docs/aro/gpu/>ARO with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/aro/cert-manager/ title="ARO Custom domain with cert-manager and LetsEncrypt" class=dd-item><a href=https://mobb.ninja/docs/aro/cert-manager/>ARO Custom domain with cert-manager and LetsEncrypt</a></li><li data-nav-id=/docs/aro/ibm-cloud-paks-for-data/ title="ARO IBM Cloud Paks 4 Data" class=dd-item><a href=https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/>ARO IBM Cloud Paks 4 Data</a></li><li data-nav-id=/docs/aro/trident/ title="Trident NetApp operator setup for Azure NetApp files" class=dd-item><a href=https://mobb.ninja/docs/aro/trident/>Trident NetApp operator setup for Azure NetApp files</a></li><li data-nav-id=/docs/aro/managed-upgrade-operator/ title="Enable the Managed Upgrade Operator in ARO and schedule Upgrades" class=dd-item><a href=https://mobb.ninja/docs/aro/managed-upgrade-operator/>Enable the Managed Upgrade Operator in ARO and schedule Upgrades</a></li><li data-nav-id=/docs/aro/additional-ingress-controller/ title="Adding an additional ingress controller to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/additional-ingress-controller/>Adding an additional ingress controller to an ARO cluster</a></li><li data-nav-id=/docs/aro/ocm/ title="Registering an ARO cluster to OpenShift Cluster Manager" class=dd-item><a href=https://mobb.ninja/docs/aro/ocm/>Registering an ARO cluster to OpenShift Cluster Manager</a></li><li data-nav-id=/docs/aro/disaster-recovery/ title="ARO - Considerations for Disaster Recovery" class=dd-item><a href=https://mobb.ninja/docs/aro/disaster-recovery/>ARO - Considerations for Disaster Recovery</a></li><li data-nav-id=/docs/aro/private-cluster/ title="Private ARO Cluster with access via JumpHost" class=dd-item><a href=https://mobb.ninja/docs/aro/private-cluster/>Private ARO Cluster with access via JumpHost</a></li><li data-nav-id=/docs/aro/egress-ipam-operator/ title="Using the Egressip Ipam Operator with a Private ARO Cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/egress-ipam-operator/>Using the Egressip Ipam Operator with a Private ARO Cluster</a></li><li data-nav-id=/docs/aro/user-workload-monitoring/ title="User Workload Monitoring on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/aro/user-workload-monitoring/>User Workload Monitoring on Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/aro/federated-metrics/ title="Federating System and User metrics to Azure Files in Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/aro/federated-metrics/>Federating System and User metrics to Azure Files in Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/aro/astronomer/ title="Installing Astronomer on a private ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/astronomer/>Installing Astronomer on a private ARO cluster</a></li></ul></li><li data-nav-id=/docs/misc/ title=Miscellaneous class=dd-item><input type=checkbox id=section-4743293995ef089d075c101a4e477e5c class=toggle><label for=section-4743293995ef089d075c101a4e477e5c></label><a href=https://mobb.ninja/docs/misc/>Miscellaneous</a><ul><li data-nav-id=/docs/misc/cost-management/ title="Red Hat Cost Management for Cloud Services" class=dd-item><a href=https://mobb.ninja/docs/misc/cost-management/>Red Hat Cost Management for Cloud Services</a></li><li data-nav-id=/docs/misc/azure-dev-ops-with-managed-openshift/ title="Azure DevOps with Managed OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/azure-dev-ops-with-managed-openshift/>Azure DevOps with Managed OpenShift</a></li><li data-nav-id=/docs/misc/oadp/ title="MOBB Docs and Guides - oadp" class=dd-item><input type=checkbox id=section-325dd7bf30613094ac338d7da82aacea class=toggle><label for=section-325dd7bf30613094ac338d7da82aacea></label><a href=https://mobb.ninja/docs/misc/oadp/>MOBB Docs and Guides - oadp</a><ul><li data-nav-id=/docs/misc/oadp/rosa-sts/ title="Deploying OpenShift API for Data Protection on a ROSA cluster" class=dd-item><a href=https://mobb.ninja/docs/misc/oadp/rosa-sts/>Deploying OpenShift API for Data Protection on a ROSA cluster</a></li></ul></li><li data-nav-id=/docs/misc/tls-cipher-customization/ title="Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers" class=dd-item><a href=https://mobb.ninja/docs/misc/tls-cipher-customization/>Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers</a></li><li data-nav-id=/docs/misc/jup/ title="Jupyter Notebooks" class=dd-item><input type=checkbox id=section-7af6414e26181825f2ee42d2fad956be class=toggle><label for=section-7af6414e26181825f2ee42d2fad956be></label><a href=https://mobb.ninja/docs/misc/jup/>Jupyter Notebooks</a><ul><li data-nav-id=/docs/misc/jup/buildnotebook/ title="How to deploy Jupyter Notebook" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/buildnotebook/>How to deploy Jupyter Notebook</a></li><li data-nav-id=/docs/misc/jup/opendatahub-gpu/ title="Installing the Open Data Hub Operator" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/opendatahub-gpu/>Installing the Open Data Hub Operator</a></li></ul></li><li data-nav-id=/docs/misc/default-router-custom-domain/ title="Stop default router from serving custom domain routes" class=dd-item><a href=https://mobb.ninja/docs/misc/default-router-custom-domain/>Stop default router from serving custom domain routes</a></li><li data-nav-id=/docs/misc/secrets-store-csi/ title="Installing the Kubernetes Secret Store CSI on OpenShift" class=dd-item><input type=checkbox id=section-83dcfc1bac9347003164dd6ca6bb9da6 class=toggle><label for=section-83dcfc1bac9347003164dd6ca6bb9da6></label><a href=https://mobb.ninja/docs/misc/secrets-store-csi/>Installing the Kubernetes Secret Store CSI on OpenShift</a><ul><li data-nav-id=/docs/misc/secrets-store-csi/hashicorp-vault/ title="Installing the HashiCorp Vault Secret CSI Driver" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/hashicorp-vault/>Installing the HashiCorp Vault Secret CSI Driver</a></li><li data-nav-id=/docs/misc/secrets-store-csi/azure-key-vault/ title="Azure Key Vault CSI on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/azure-key-vault/>Azure Key Vault CSI on Azure Red Hat OpenShift</a></li></ul></li><li data-nav-id=/docs/misc/common-images-namespace/ title="OpenShift - Sharing Common images" class=dd-item><a href=https://mobb.ninja/docs/misc/common-images-namespace/>OpenShift - Sharing Common images</a></li><li data-nav-id=/docs/misc/references/ title="Common Managed OpenShift References / Tasks" class=dd-item><a href=https://mobb.ninja/docs/misc/references/>Common Managed OpenShift References / Tasks</a></li></ul></li><li data-nav-id=/docs/o11y/ title=Observability class=dd-item><input type=checkbox id=section-cf64d50e30bf8c808e1a384a9dd9f94e class=toggle><label for=section-cf64d50e30bf8c808e1a384a9dd9f94e></label><a href=https://mobb.ninja/docs/o11y/>Observability</a><ul><li data-nav-id=/docs/o11y/openshift-logging/ title="OpenShift Logging" class=dd-item><a href=https://mobb.ninja/docs/o11y/openshift-logging/>OpenShift Logging</a></li><li data-nav-id=/docs/o11y/az-log-analytics/ title="Shipping logs to Azure Log Analytics" class=dd-item><a href=https://mobb.ninja/docs/o11y/az-log-analytics/>Shipping logs to Azure Log Analytics</a></li></ul></li><li data-nav-id=/docs/redhat/ title="Other Red Hat Products" class=dd-item><input type=checkbox id=section-61ee77d4a0d9667d2a6b99ce46059f1d class=toggle><label for=section-61ee77d4a0d9667d2a6b99ce46059f1d></label><a href=https://mobb.ninja/docs/redhat/>Other Red Hat Products</a><ul><li data-nav-id=/docs/redhat/rhacs/ title="Deploying Red Hat Advanced Cluster Security in ARO/ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/rhacs/>Deploying Red Hat Advanced Cluster Security in ARO/ROSA</a></li><li data-nav-id=/docs/redhat/acm/ title="Advanced Cluster Management" class=dd-item><input type=checkbox id=section-d7942abe72cdf38022f3b7c824316905 class=toggle><label for=section-d7942abe72cdf38022f3b7c824316905></label><a href=https://mobb.ninja/docs/redhat/acm/>Advanced Cluster Management</a><ul><li data-nav-id=/docs/redhat/acm/submariner/ title="Advanced Cluster Management - Submariner" class=dd-item><input type=checkbox id=section-8144b1f974c3fa53914395fa7463b3ee class=toggle><label for=section-8144b1f974c3fa53914395fa7463b3ee></label><a href=https://mobb.ninja/docs/redhat/acm/submariner/>Advanced Cluster Management - Submariner</a><ul><li data-nav-id=/docs/redhat/acm/submariner/aro/ title="Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/aro/>Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters</a></li><li data-nav-id=/docs/redhat/acm/submariner/rosa/ title="Deploy ACM Submariner for connect overlay networks of ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/rosa/>Deploy ACM Submariner for connect overlay networks of ROSA clusters</a></li></ul></li><li data-nav-id=/docs/redhat/acm/observability/ title="Advanced Cluster Management - Observability" class=dd-item><input type=checkbox id=section-16c8cbcc1de529ce480045089e9bde5c class=toggle><label for=section-16c8cbcc1de529ce480045089e9bde5c></label><a href=https://mobb.ninja/docs/redhat/acm/observability/>Advanced Cluster Management - Observability</a><ul><li data-nav-id=/docs/redhat/acm/observability/rosa/ title="Advanced Cluster Management Observability on ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/observability/rosa/>Advanced Cluster Management Observability on ROSA</a></li></ul></li></ul></li><li data-nav-id=/docs/redhat/crane/ title="Migrate Kubernetes Applications with Konveyer Crane" class=dd-item><a href=https://mobb.ninja/docs/redhat/crane/>Migrate Kubernetes Applications with Konveyer Crane</a></li><li data-nav-id=/docs/redhat/3scale/ title="Deploying 3scale API Management to ROSA and OSD" class=dd-item><a href=https://mobb.ninja/docs/redhat/3scale/>Deploying 3scale API Management to ROSA and OSD</a></li><li data-nav-id=/docs/redhat/gitops/ title="Demonstrate GitOps on Managed OpenShift with ArgoCD" class=dd-item><a href=https://mobb.ninja/docs/redhat/gitops/>Demonstrate GitOps on Managed OpenShift with ArgoCD</a></li></ul></li><li data-nav-id=/docs/gcp/ title="OSD on Google Cloud" class=dd-item><input type=checkbox id=section-34c34dd71fe103bc20cfa9eed6fa905c class=toggle><label for=section-34c34dd71fe103bc20cfa9eed6fa905c></label><a href=https://mobb.ninja/docs/gcp/>OSD on Google Cloud</a><ul><li data-nav-id=/docs/gcp/osd_preexisting_vpc/ title="Creating a OSD in GCP with Existing VPCs" class=dd-item><a href=https://mobb.ninja/docs/gcp/osd_preexisting_vpc/>Creating a OSD in GCP with Existing VPCs</a></li><li data-nav-id=/docs/gcp/filestore/ title="Create Filestore Storage for OSD in GCP" class=dd-item><a href=https://mobb.ninja/docs/gcp/filestore/>Create Filestore Storage for OSD in GCP</a></li></ul></li><li data-nav-id=/docs/idp/ title="Configuring IDP for ROSA, OSD and ARO" class=dd-item><input type=checkbox id=section-de867ba7872b33ba38d343e5be5e3e1c class=toggle><label for=section-de867ba7872b33ba38d343e5be5e3e1c></label><a href=https://mobb.ninja/docs/idp/>Configuring IDP for ROSA, OSD and ARO</a><ul><li data-nav-id=/docs/idp/azuread-red-hat-sso/ title="Configure Red Hat SSO with Azure AD as a Federated Identity Provider" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-red-hat-sso/>Configure Red Hat SSO with Azure AD as a Federated Identity Provider</a></li><li data-nav-id=/docs/idp/considerations-aad-ipd/ title="What to consider when using Azure AD as IDP?" class=dd-item><a href=https://mobb.ninja/docs/idp/considerations-aad-ipd/>What to consider when using Azure AD as IDP?</a></li><li data-nav-id=/docs/idp/azuread-aro-cli/ title="Configure Azure AD as an OIDC identity provider for ARO with cli" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro-cli/>Configure Azure AD as an OIDC identity provider for ARO with cli</a></li><li data-nav-id=/docs/idp/azuread-aro/ title="Configure ARO to use Azure AD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro/>Configure ARO to use Azure AD</a></li><li data-nav-id=/docs/idp/azuread/ title="Configure Azure AD as an OIDC identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread/>Configure Azure AD as an OIDC identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/group-claims/ title="MOBB Docs and Guides - group-claims" class=dd-item><input type=checkbox id=section-af199904c6a78739e6598ab72890c976 class=toggle><label for=section-af199904c6a78739e6598ab72890c976></label><a href=https://mobb.ninja/docs/idp/group-claims/>MOBB Docs and Guides - group-claims</a><ul><li data-nav-id=/docs/idp/group-claims/aro/ title="Configure ARO to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/aro/>Configure ARO to use Azure AD Group Claims</a></li><li data-nav-id=/docs/idp/group-claims/rosa/ title="Configure ROSA to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/rosa/>Configure ROSA to use Azure AD Group Claims</a></li></ul></li><li data-nav-id=/docs/idp/okta-grp-sync/ title="Using Group Sync Operator with Okta and ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/okta-grp-sync/>Using Group Sync Operator with Okta and ROSA/OSD</a></li><li data-nav-id=/docs/idp/gitlab-aro/ title="Configure GitLab as an identity provider for ARO" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab-aro/>Configure GitLab as an identity provider for ARO</a></li><li data-nav-id=/docs/idp/gitlab/ title="Configure GitLab as an identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab/>Configure GitLab as an identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/az-ad-grp-sync/ title="Using Group Sync Operator with Azure Active Directory and ROSA" class=dd-item><a href=https://mobb.ninja/docs/idp/az-ad-grp-sync/>Using Group Sync Operator with Azure Active Directory and ROSA</a></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title></div><ul><li><a class=padding href=https://github.com/rh-mobb/documentation target=_blank><i class='fab fa-fw fa-github'></i> Github</a></li><li><a class=padding href=https://github.com/rh-mobb/documentation/archive/refs/heads/main.zip target=_blank><i class='fas fa-fw fa-file-download'></i> Download</a></li><li><a class=padding href=https://www.redhat.com/en/blog target=_blank><i class='fab fa-fw fa-redhat'></i> Red Hat Blog</a></li><li><a class=padding href=https://www.redhat.com/en/contact target=_blank><i class='fas fa-fw fa-user-md'></i> Contact Us</a></li><li><a class=padding href=https://mobb.ninja/tags/ target=_blank><i class='fas fa-fw fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><a class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></a></li><li id=select-variant-container class=footerVariantSwitch><a class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=select-clear></div></a><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><a class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://mobb.ninja/js/clipboard.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/perfect-scrollbar.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/featherlight.min.js?1689714599 defer></script>
<script src=https://mobb.ninja/js/theme.js?1689714599 defer></script></body></html>