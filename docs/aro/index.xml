<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Azure Red Hat OpenShift on Managed OpenShift Black Belt - Unofficial Documentation</title><link>https://mobb.ninja/docs/aro/</link><description>Recent content in Azure Red Hat OpenShift on Managed OpenShift Black Belt - Unofficial Documentation</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 14 Sep 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://mobb.ninja/docs/aro/index.xml" rel="self" type="application/rss+xml"/><item><title>Azure Front Door with ARO ( Azure Red Hat OpenShift )</title><link>https://mobb.ninja/docs/aro/frontdoor/</link><pubDate>Wed, 29 Mar 2023 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/frontdoor/</guid><description>Securing exposing an Internet facing application with a private ARO Cluster.
When you create a cluster on ARO you have several options in making the cluster public or private. With a public cluster you are allowing Internet traffic to the api and *.apps endpoints. With a private cluster you can make either or both the api and .apps endpoints private.
How can you allow Internet access to an application running on your private cluster where the .</description></item><item><title>Setup a VPN Connection into an ARO Cluster with OpenVPN</title><link>https://mobb.ninja/docs/aro/vpn/</link><pubDate>Wed, 29 Mar 2023 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/vpn/</guid><description>When you configure an Azure Red Hat OpenShift (ARO) cluster with a private only configuration, you will need connectivity to this private network in order to access your cluster. This guide will show you how to configute a point-to-site VPN connection so you won&amp;rsquo;t need to setup and configure Jump Boxes.
Prerequisites a private ARO Cluster git openssl Create certificates to use for your VPN Connection There are many ways and methods to create certificates for VPN, the guide below is one of the ways that works well.</description></item><item><title>Shipping logs and metrics to Azure Blob storage</title><link>https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/</link><pubDate>Sat, 01 Oct 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/</guid><description>Azure Red Hat Openshift clusters have built in metrics and logs that can be viewed by both Administrators and Developers via the OpenShift Console. But there are many reasons you might want to store and view these metrics and logs from outside of the cluster.
The OpenShift developers have anticipated this needs and have provided ways to ship both metrics and logs outside of the cluster. In Azure we have the Azure Blob storage service which is perfect for storing the data.</description></item><item><title>Azure Service Operator</title><link>https://mobb.ninja/docs/aro/azure-service-operator/</link><pubDate>Mon, 19 Sep 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/azure-service-operator/</guid><description/></item><item><title>Quay on ARO</title><link>https://mobb.ninja/docs/aro/setup-quay/</link><pubDate>Mon, 19 Sep 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/setup-quay/</guid><description/></item><item><title>Accessing the Internal Registry from ARO</title><link>https://mobb.ninja/docs/aro/registry/</link><pubDate>Tue, 28 Jun 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/registry/</guid><description>Kevin Collins
06/28/2022
One of the advantages of using OpenShift is the internal registry that comes with OpenShfit to build, deploy and manage container images locally. By default, access to the registry is limited to the cluster ( by design ) but can be extended to usage outside of the cluster. This guide will go through the steps required to access the OpenShift Registry on an ARO cluster outside of the cluster.</description></item><item><title>Configure ARO with OpenShift Data Foundation</title><link>https://mobb.ninja/docs/aro/odf/</link><pubDate>Tue, 28 Jun 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/odf/</guid><description>NOTE: This guide demonstrates how to setup and configure self-managed OpenShift Data Foundation in Internal Mode on an ARO Cluster and test it out.
Prerequisites An Azure Red Hat OpenShift cluster ( verion 4.10+ ) kubectl cli oc cli moreutils (sponge) jq Install compute nodes for ODF A best practice for optimal performance is to run ODF on dedicated nodes with a minimum of one per zone. In this guide, we will be provisioning 3 additional compute nodes, one per zone.</description></item><item><title>ARO with Nvidia GPU Workloads</title><link>https://mobb.ninja/docs/aro/gpu/</link><pubDate>Wed, 22 Jun 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/gpu/</guid><description>ARO guide to running Nvidia GPU workloads.
Prerequisites oc cli jq, moreutils, and gettext package ARO 4.10 If you need to install an ARO cluster, please read our ARO Quick start guide . Please be sure if you&amp;rsquo;re installing or using an existing ARO cluster that it is 4.10.x or higher.
As of OpenShift 4.10, it is no longer necessary to set up entitlements to use the nVidia Operator. This has greatly simplified the setup of the cluster for GPU workloads.</description></item><item><title>ARO Custom domain with cert-manager and LetsEncrypt</title><link>https://mobb.ninja/docs/aro/cert-manager/</link><pubDate>Sun, 19 Jun 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/cert-manager/</guid><description>ARO guide to deploying an ARO cluster with custom domain and automating certificate management with cert-manager and letsencrypt certificates to manage the *.apps and api endpoints.
Prerequisites az cli (already installed in Azure Cloud Shell) oc cli jq (already installed in Azure Cloud Shell) OpenShift 4.10+ domain name to use (we will create zones for this domain name during this guide) I&amp;rsquo;m going to be running this setup through Bash on the Azure Cloud Shell.</description></item><item><title>ARO IBM Cloud Paks 4 Data</title><link>https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/</link><pubDate>Wed, 15 Jun 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/</guid><description>A Quickstart guide to deploying an Azure Red Hat OpenShift cluster with IBM Cloud Paks 4 Data.
Video Walkthrough If you prefer a more visual medium, you can watch [Kristopher White] walk through this quickstart on YouTube .
Prerequisites Azure CLI Obviously you&amp;rsquo;ll need to have an Azure account to configure the CLI against.
MacOS
See Azure Docs for alternative install options.
Install Azure CLI using homebrew
brew update &amp;amp;&amp;amp; brew install azure-cli Linux</description></item><item><title>Trident NetApp operator setup for Azure NetApp files</title><link>https://mobb.ninja/docs/aro/trident/</link><pubDate>Mon, 23 May 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/trident/</guid><description>Note: This guide a simple &amp;ldquo;happy path&amp;rdquo; to show the path of least friction to showcasing how to use NetApp files with Azure Red Hat OpenShift. This may not be the best behavior for any system beyond demonstration purposes.
Prerequisites An Azure Red Hat OpenShift cluster installed with Service Principal role/credentials. kubectl cli oc cli helm 3 cli Review official trident documentation In this guide, you will need service principal and region details.</description></item><item><title>Enable the Managed Upgrade Operator in ARO and schedule Upgrades</title><link>https://mobb.ninja/docs/aro/managed-upgrade-operator/</link><pubDate>Tue, 12 Apr 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/managed-upgrade-operator/</guid><description>Prerequisites an Azure Red Hat OpenShift cluster Get Started Run this oc command to enable the Managed Upgrade Operator (MUO)
oc patch cluster.aro.openshift.io cluster --patch \ &amp;#39;{&amp;#34;spec&amp;#34;:{&amp;#34;operatorflags&amp;#34;:{&amp;#34;rh.srep.muo.enabled&amp;#34;: &amp;#34;true&amp;#34;,&amp;#34;rh.srep.muo.managed&amp;#34;: &amp;#34;true&amp;#34;,&amp;#34;rh.srep.muo.deploy.pullspec&amp;#34;:&amp;#34;arosvc.azurecr.io/managed-upgrade-operator@sha256:f57615aa690580a12c1e5031ad7ea674ce249c3d0f54e6dc4d070e42a9c9a274&amp;#34;}}}&amp;#39; \ --type=merge Wait a few moments to ensure the Management Upgrade Operator is ready
oc -n openshift-managed-upgrade-operator \ get deployment managed-upgrade-operator NAME READY UP-TO-DATE AVAILABLE AGE managed-upgrade-operator 1/1 1 1 2m2s Configure the Managed Upgrade Operator
cat &amp;lt;&amp;lt; EOF | oc apply -f - apiVersion: v1 kind: ConfigMap metadata: name: managed-upgrade-operator-config namespace: openshift-managed-upgrade-operator data: config.</description></item><item><title>ARO - Considerations for Disaster Recovery</title><link>https://mobb.ninja/docs/aro/disaster-recovery/</link><pubDate>Thu, 15 Jul 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/disaster-recovery/</guid><description>This is a high level overview of disaster recovery options for Azure Red Hat OpenShift. It is not a detailed design, but rather a starting point for a more detailed design.
What is Disaster Recovery (DR) Disaster Recovery is an umbrella term that includes the following:
Backup (and restore!) Failover (and failback!) High Availability Disaster Avoidence The most important part of Disaster Recovery is the &amp;ldquo;Recovery&amp;rdquo;. Whatever your DR plan it must be tested and ideally performed on a semi-regular basis.</description></item><item><title>Configure a Private ARO cluster with Azure File via a Private Endpoint</title><link>https://mobb.ninja/docs/aro/private_endpoint/</link><pubDate>Tue, 27 Jun 2023 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/aro/private_endpoint/</guid><description>There are two way to configure this set up
Self provision the storage account and file share (static method) Requires pre-existing storage account and file share Auto provision the storage account and file share (dynamic method) CSI will create the storage account and file share WARNING please note that this approach does not work on FIPS-enabled clusters. This is due to the CIFS protocol being largely non-compliant with FIPS cryptographic requirements.</description></item><item><title>Using Azure Container Registry in Private ARO clusters</title><link>https://mobb.ninja/docs/aro/aro-acr/</link><pubDate>Thu, 08 Jun 2023 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/aro/aro-acr/</guid><description>This guide describes how configure and deploy an Azure Container Registry, limiting the access to the registry and connecting privately from a Private ARO cluster, eliminating exposure from the public internet.
You can limit access to the ACR by assigning virtual network private IP addresses to the registry endpoints and using Azure Private Link .
Network traffic between the Private ARO cluster and the registry&amp;rsquo;s private endpoints traverses the virtual network and a private link on the Microsoft backbone network, eliminating exposure from the public internet.</description></item><item><title>Using Cluster Logging Forwarder in ARO with Azure Monitor</title><link>https://mobb.ninja/docs/aro/clf-to-azure/</link><pubDate>Sun, 26 Mar 2023 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/aro/clf-to-azure/</guid><description>In Azure Red Hat OpenShift (ARO) you can fairly easily set up cluster logging to an in-cluster Elasticsearch using the OpenShift Elasticsearch Operator and the Cluster Logging Operator, but what if you want to use the Azure native Log Analytics service?
There&amp;rsquo;s a number of ways to do this, for example installing agents onto the VMs (in this case, it would be a DaemonSet with hostvar mounts) but that isn&amp;rsquo;t ideal in a managed system like ARO.</description></item><item><title>Upgrade a disconnected ARO cluster</title><link>https://mobb.ninja/docs/aro/upgrade-disconnected-aro/</link><pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/upgrade-disconnected-aro/</guid><description>Background One of the great features of ARO is that you can create &amp;lsquo;disconnected&amp;rsquo; clusters with no connectivity to the Internet. Out of the box, the ARO service mirrors all the code repositories to build OpenShift clusters to Azure Container Registry. This means ARO is built without having to reach out to the Internet as the images to build OpenShift are pulled via the Azure private network.
When you upgrade a cluster, OpenShift needs to call out to the Internet to get an upgrade graph to see what options you have to upgrade the cluster.</description></item><item><title>Helm Chart to set up extra MachineSets on ARO clusters</title><link>https://mobb.ninja/docs/aro/aro-machinesets/readme/</link><pubDate>Thu, 08 Dec 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/aro-machinesets/readme/</guid><description>Please refer to the The Managed OpenShift Black Belt team maintained Helm chart at here .</description></item><item><title>Integrating Azure ARC with ARO</title><link>https://mobb.ninja/docs/aro/azure-arc-integration/</link><pubDate>Fri, 04 Nov 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/azure-arc-integration/</guid><description>This document explain how to integrate ARO cluster with Azure Arc-enabled Kubernetes. When you connect a Kubernetes/OpenShift cluster with Azure Arc, it will:
Be represented in Azure Resource Manager with a unique ID Be placed in an Azure subscription and resource group Receive tags just like any otherAzure resource Azure Arc-enabled Kubernetes supports the following scenarios for connected clusters:
Connect Kubernetes running outside of Azure for inventory, grouping, and tagging. Deploy applications and apply configuration using GitOps-based configuration management.</description></item><item><title>Configure a load balancer service to use a static public IP</title><link>https://mobb.ninja/docs/aro/static-ip-load-balancer/</link><pubDate>Wed, 05 Oct 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/static-ip-load-balancer/</guid><description>This guide demonstrates how to create and assign a static public IP address to an OpenShift service in Azure Red Hat OpenShift (ARO). By default, the public IP address assigned to an OpenShift service with a type of LoadBalancer created by an ARO cluster is only valid for the lifespan of that resource. If you delete the OpenShift service, the associated load balancer and IP address are also deleted. If you want to assign a specific IP address or retain an IP address for redeployed OpenShift services, you can create and use a static public IP address.</description></item><item><title>Adding infrastructure nodes to an ARO cluster</title><link>https://mobb.ninja/docs/aro/add-infra-nodes/</link><pubDate>Wed, 17 Aug 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/add-infra-nodes/</guid><description>This document shows how to set up infrastructure nodes in an ARO cluster and move infrastructure related workloads to them. This can help with larger clusters that have resource contention between user workloads and infrastructure workloads such as Prometheus.
Important note: Infrastructure nodes are billed at the same rates as your existing ARO worker nodes.
You can find the original (and more detailed) document describing the process for a self-managed OpenShift Container Platform cluster here Prerequisites Azure Red Hat OpenShift cluster Helm CLI Create Infra Nodes We&amp;rsquo;ll use the MOBB Helm Chart for adding ARO machinesets which defaults to creating infra nodes, it looks up an existing machineset to collect cluster specific settings and then creates a new machineset specific for infra nodes with the same settings.</description></item><item><title>Apply Azure Policy to Azure Policy</title><link>https://mobb.ninja/docs/aro/azure-policy/</link><pubDate>Mon, 25 Jul 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/azure-policy/</guid><description>Azure Policy helps to enforce organizational standards and to assess compliance at-scale. Azure Policy supports arc enabled kubernetes cluster with both build-in and custom policies to ensure kubernetes resources are compliant. This article demonstrates how to make Azure Redhat Openshift cluster compliant with azure policy.
Prerequisites Azure CLI Openshift CLI Azure Openshift Cluster (ARO Cluster) Deploy Azure Policy Deploy Azure Arc and Enable Azure Policy Add-on az connectedk8s connect -n [Cluster_Name] -g [Resource_Group_Name] az k8s-extension create --cluster-type connectedClusters --cluster-name [Cluster_Name] --resource-group [Resource_Group_Name] --extension-type Microsoft.</description></item><item><title>Adding an additional ingress controller to an ARO cluster</title><link>https://mobb.ninja/docs/aro/additional-ingress-controller/</link><pubDate>Sat, 19 Mar 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/additional-ingress-controller/</guid><description>Prerequisites an Azure Red Hat OpenShift cluster a DNS zone that you can easily modify Get Started Create some environment variables
DOMAIN=custom.azure.mobb.ninja EMAIL=example@email.com SCRATCH_DIR=/tmp/aro Create a certificate for the ingress controller
certbot certonly --manual \ --preferred-challenges=dns \ --email $EMAIL \ --server https://acme-v02.api.letsencrypt.org/directory \ --agree-tos \ --manual-public-ip-logging-ok \ -d &amp;#34;*.$DOMAIN&amp;#34; \ --config-dir &amp;#34;$SCRATCH_DIR/config&amp;#34; \ --work-dir &amp;#34;$SCRATCH_DIR/work&amp;#34; \ --logs-dir &amp;#34;$SCRATCH_DIR/logs&amp;#34; Create a secret for the certificate
oc create secret tls custom-tls \ -n openshift-ingress \ --cert=$SCRATCH_DIR/config/live/$DOMAIN/fullchain.</description></item><item><title>Registering an ARO cluster to OpenShift Cluster Manager</title><link>https://mobb.ninja/docs/aro/ocm/</link><pubDate>Tue, 21 Sep 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/ocm/</guid><description>Registering an ARO cluster to OpenShift Cluster Manager ARO clusters do not come connected to OpenShift Cluster Manager by default, because Azure would like customers to specifically opt-in to connections / data sent outside of Azure. This is the case with registering to OpenShift cluster manager, which enables a telemetry service in ARO.
Prerequisites An Red Hat account. If you have any subscriptions with Red Hat, you will have a Red Hat account.</description></item><item><title>Private ARO Cluster with access via JumpHost</title><link>https://mobb.ninja/docs/aro/private-cluster/</link><pubDate>Tue, 29 Jun 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/private-cluster/</guid><description>A Quickstart guide to deploying a Private Azure Red Hat OpenShift cluster.
Once the cluster is running you will need a way to access the private network that ARO is deployed into.
Authors: Paul Czarkowski , Ricardo Macedo Martins Prerequisites Azure CLI Obviously you&amp;rsquo;ll need to have an Azure account to configure the CLI against.
MacOS
See Azure Docs for alternative install options.
Install Azure CLI using homebrew
brew update &amp;amp;&amp;amp; brew install azure-cli Install sshuttle using homebrew</description></item><item><title>Using the Egressip Ipam Operator with a Private ARO Cluster</title><link>https://mobb.ninja/docs/aro/egress-ipam-operator/</link><pubDate>Tue, 29 Jun 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/egress-ipam-operator/</guid><description>Note This guide is only valid for ARO clusters created on version 4.10 or earlier.
Clusters created on version 4.11 and later use OVNKubernetes as their Container Network Interface, and egressip-ipam-operator does not support OVNKubernetes. Please see EgressIP as a possible alternative.
Prerequisites A private ARO cluster that uses OpenShift SDN as its CNI Deploy the Egressip Ipam Operator Via GUI Log into the ARO cluster&amp;rsquo;s Console
Switch to the Administrator view</description></item><item><title>User Workload Monitoring on Azure Red Hat OpenShift</title><link>https://mobb.ninja/docs/aro/user-workload-monitoring/</link><pubDate>Mon, 07 Jun 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/user-workload-monitoring/</guid><description>In Azure Red Hat OpenShift (ARO) Monitoring for User Defined Projects is disabled by default. Follow these instructions to enable it.
Enabling See docs for more indepth details.
Check the cluster-monitoring-config ConfigMap object
oc -n openshift-monitoring get configmap cluster-monitoring-config -o yaml Enable User Workload Monitoring by doing one of the following
If the data.config.yaml is not {} you should edit it and add the enableUserWorkload: true line manually.
oc -n openshift-monitoring edit configmap cluster-monitoring-config Otherwise if its {} then you can run the following command safely.</description></item><item><title>Federating System and User metrics to Azure Files in Azure Red Hat OpenShift</title><link>https://mobb.ninja/docs/aro/federated-metrics/</link><pubDate>Fri, 04 Jun 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/federated-metrics/</guid><description>By default Azure Red Hat OpenShift (ARO) stores metrics in Ephemeral volumes, and its advised that users do not change this setting. However its not unreasonable to expect that metrics should be persisted for a set amount of time.
This guide shows how to set up Thanos to federate both System and User Workload Metrics to a Thanos gateway that stores the metrics in Azure Files and makes them available via a Grafana instance (managed by the Grafana Operator).</description></item><item><title>Installing Astronomer on a private ARO cluster</title><link>https://mobb.ninja/docs/aro/astronomer/</link><pubDate>Mon, 24 May 2021 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/aro/astronomer/</guid><description>see here for public clusters.
This assumes you&amp;rsquo;ve already got a private ARO cluster installed. You could also follow the same instructions to create a public Astronomer, just use a regular DNS zone and skip the private parts.
A default 3-node cluster is a bit small for Astronomer, If you have a three node cluster you can increase it by updating the replicas count machinesets in the openshift-machine-api namespace.</description></item></channel></rss>